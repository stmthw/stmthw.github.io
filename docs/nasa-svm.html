<!DOCTYPE html>
<html lang xml:lang>
<head>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Chapter 2 NASA SVM [ML|PY] | Data Portfolio</title>
  <meta name="description" content="&lt;p&gt;My online portfolio using a minimalist theme.&lt;/p&gt;">
  <meta name="generator" content="bookdown 0.28 and GitBook 2.6.7">

  <meta property="og:title" content="Chapter 2 NASA SVM [ML|PY] | Data Portfolio">
  <meta property="og:type" content="book">
  
  <meta property="og:description" content="&lt;p&gt;My online portfolio using a minimalist theme.&lt;/p&gt;">
  

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Chapter 2 NASA SVM [ML|PY] | Data Portfolio">
  
  <meta name="twitter:description" content="&lt;p&gt;My online portfolio using a minimalist theme.&lt;/p&gt;">
  

<meta name="author" content="Matthew Robert Sears">


<meta name="date" content="2022-10-29">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="google-capstone.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet">
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet">
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet">
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet">
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet">
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet">
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet">








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet">
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet">
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css">
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css" data-external="1"></head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Portfolio</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> README</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#structure"><i class="fa fa-check"></i><b>1.1</b> Structure</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#why-bookdown"><i class="fa fa-check"></i><b>1.2</b> Why Bookdown?</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="nasa-svm.html"><a href="nasa-svm.html"><i class="fa fa-check"></i><b>2</b> NASA SVM [ML|PY]</a>
<ul>
<li class="chapter" data-level="2.1" data-path="nasa-svm.html"><a href="nasa-svm.html#description"><i class="fa fa-check"></i><b>2.1</b> Description</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="nasa-svm.html"><a href="nasa-svm.html#data"><i class="fa fa-check"></i><b>2.1.1</b> Data</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="nasa-svm.html"><a href="nasa-svm.html#algorithm"><i class="fa fa-check"></i><b>2.2</b> Algorithm</a></li>
<li class="chapter" data-level="2.3" data-path="nasa-svm.html"><a href="nasa-svm.html#analysis"><i class="fa fa-check"></i><b>2.3</b> Analysis</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="nasa-svm.html"><a href="nasa-svm.html#scripts"><i class="fa fa-check"></i><b>2.3.1</b> Scripts</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="nasa-svm.html"><a href="nasa-svm.html#conclusions"><i class="fa fa-check"></i><b>2.4</b> Conclusions</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="nasa-svm.html"><a href="nasa-svm.html#todo"><i class="fa fa-check"></i><b>2.4.1</b> TODO</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="nasa-svm.html"><a href="nasa-svm.html#nasa-fw"><i class="fa fa-check"></i><b>2.5</b> Future Work?</a></li>
<li class="chapter" data-level="" data-path="nasa-svm.html"><a href="nasa-svm.html#source-code"><i class="fa fa-check"></i>Source Code</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="google-capstone.html"><a href="google-capstone.html"><i class="fa fa-check"></i><b>3</b> Google Capstone [DA|R]</a>
<ul>
<li class="chapter" data-level="3.1" data-path="google-capstone.html"><a href="google-capstone.html#description-1"><i class="fa fa-check"></i><b>3.1</b> Description</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="google-capstone.html"><a href="google-capstone.html#scenario"><i class="fa fa-check"></i><b>3.1.1</b> Scenario</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="google-capstone.html"><a href="google-capstone.html#ask"><i class="fa fa-check"></i><b>3.2</b> Ask</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="google-capstone.html"><a href="google-capstone.html#objective"><i class="fa fa-check"></i><b>3.2.1</b> Objective</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="google-capstone.html"><a href="google-capstone.html#prepare-process"><i class="fa fa-check"></i><b>3.3</b> Prepare / Process</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="google-capstone.html"><a href="google-capstone.html#pre-processing-with-r"><i class="fa fa-check"></i><b>3.3.1</b> Pre-Processing with R</a></li>
<li class="chapter" data-level="3.3.2" data-path="google-capstone.html"><a href="google-capstone.html#feature-engineering"><i class="fa fa-check"></i><b>3.3.2</b> Feature Engineering</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="google-capstone.html"><a href="google-capstone.html#analyze"><i class="fa fa-check"></i><b>3.4</b> Analyze</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="google-capstone.html"><a href="google-capstone.html#basic-descriptive-statistics"><i class="fa fa-check"></i><b>3.4.1</b> Basic Descriptive Statistics</a></li>
<li class="chapter" data-level="3.4.2" data-path="google-capstone.html"><a href="google-capstone.html#viz-trip-behavior"><i class="fa fa-check"></i><b>3.4.2</b> Viz: Trip Behavior</a></li>
<li class="chapter" data-level="3.4.3" data-path="google-capstone.html"><a href="google-capstone.html#viz-bike-choice"><i class="fa fa-check"></i><b>3.4.3</b> Viz: Bike Choice</a></li>
<li class="chapter" data-level="3.4.4" data-path="google-capstone.html"><a href="google-capstone.html#viz-popular-routes"><i class="fa fa-check"></i><b>3.4.4</b> Viz: Popular Routes</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="google-capstone.html"><a href="google-capstone.html#report"><i class="fa fa-check"></i><b>3.5</b> Share &amp; Act (Final Report)</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="google-capstone.html"><a href="google-capstone.html#key-observations"><i class="fa fa-check"></i><b>3.5.1</b> Key Observations</a></li>
<li class="chapter" data-level="3.5.2" data-path="google-capstone.html"><a href="google-capstone.html#actionables"><i class="fa fa-check"></i><b>3.5.2</b> Actionables</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="rsql.html"><a href="rsql.html"><i class="fa fa-check"></i><b>4</b> Visualizing Sentiment [DA|R]</a>
<ul>
<li class="chapter" data-level="4.1" data-path="rsql.html"><a href="rsql.html#description-2"><i class="fa fa-check"></i><b>4.1</b> Description</a></li>
<li class="chapter" data-level="4.2" data-path="rsql.html"><a href="rsql.html#setup"><i class="fa fa-check"></i><b>4.2</b> Setup</a></li>
<li class="chapter" data-level="4.3" data-path="rsql.html"><a href="rsql.html#create-sql-database"><i class="fa fa-check"></i><b>4.3</b> Create SQL Database</a>
<ul>
<li class="chapter" data-level="" data-path="rsql.html"><a href="rsql.html#aside"><i class="fa fa-check"></i>Aside</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="rsql.html"><a href="rsql.html#write-query-table"><i class="fa fa-check"></i><b>4.4</b> Write &amp; Query Table</a></li>
<li class="chapter" data-level="4.5" data-path="rsql.html"><a href="rsql.html#analysis-1"><i class="fa fa-check"></i><b>4.5</b> Analysis</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="rsql.html"><a href="rsql.html#sentiment-word-clouds"><i class="fa fa-check"></i><b>4.5.1</b> Sentiment Word Clouds</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="rsql.html"><a href="rsql.html#alter-update-table"><i class="fa fa-check"></i><b>4.6</b> Alter &amp; Update Table</a></li>
<li class="chapter" data-level="4.7" data-path="rsql.html"><a href="rsql.html#r-sql"><i class="fa fa-check"></i><b>4.7</b> R &amp; SQL</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="nn-xor.html"><a href="nn-xor.html"><i class="fa fa-check"></i><b>5</b> NN: XOR [ML|PY,MATH]</a>
<ul>
<li class="chapter" data-level="5.1" data-path="nn-xor.html"><a href="nn-xor.html#backpropagation-and-xor"><i class="fa fa-check"></i><b>5.1</b> Backpropagation and XOR</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="nn-xor.html"><a href="nn-xor.html#motivation"><i class="fa fa-check"></i><b>5.1.1</b> Motivation</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="nn-xor.html"><a href="nn-xor.html#activation"><i class="fa fa-check"></i><b>5.2</b> Activation</a></li>
<li class="chapter" data-level="5.3" data-path="nn-xor.html"><a href="nn-xor.html#multivariable-calculus"><i class="fa fa-check"></i><b>5.3</b> Multivariable Calculus</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="nn-xor.html"><a href="nn-xor.html#dissecting-the-network"><i class="fa fa-check"></i><b>5.3.1</b> Dissecting the Network</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="nn-xor.html"><a href="nn-xor.html#conclusion"><i class="fa fa-check"></i><b>5.4</b> Conclusion</a></li>
<li class="chapter" data-level="5.5" data-path="nn-xor.html"><a href="nn-xor.html#learning-xor-in-tensorflow"><i class="fa fa-check"></i><b>5.5</b> Learning XOR in TensorFlow</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="nn-mnist.html"><a href="nn-mnist.html"><i class="fa fa-check"></i><b>6</b> NN: MNIST [ML|R,MATH]</a>
<ul>
<li class="chapter" data-level="6.1" data-path="nn-mnist.html"><a href="nn-mnist.html#setup-importing-data"><i class="fa fa-check"></i><b>6.1</b> Setup &amp; Importing Data</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="nn-mnist.html"><a href="nn-mnist.html#data-1"><i class="fa fa-check"></i><b>6.1.1</b> Data</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="nn-mnist.html"><a href="nn-mnist.html#algorithm-1"><i class="fa fa-check"></i><b>6.2</b> Algorithm</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="nn-mnist.html"><a href="nn-mnist.html#initialize"><i class="fa fa-check"></i><b>6.2.1</b> Initialize</a></li>
<li class="chapter" data-level="6.2.2" data-path="nn-mnist.html"><a href="nn-mnist.html#learn"><i class="fa fa-check"></i><b>6.2.2</b> Learn</a></li>
<li class="chapter" data-level="" data-path="nn-mnist.html"><a href="nn-mnist.html#aside-2"><i class="fa fa-check"></i>Aside</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Portfolio</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="nasa-svm" class="section level1 hasAnchor" number="2">
<h1><span class="header-section-number">Chapter 2</span> NASA SVM [ML|PY]<a href="nasa-svm.html#nasa-svm" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p><strong>Acronym disambiguation with machine learning</strong></p>
<p>A personal project using python and a <a href="https://data.nasa.gov/Raw-Data/NASA-Acronyms-in-Public-Abstracts/byqb-7uyn">public NASA dataset</a> related to acronyms in public NASA white paper abstracts.</p>
<p>My source of motivation comes from the suggestion in the dataset description:</p>
<blockquote>
<p>This was found to be a suitable dataset for training disambiguation models that use the context of the surrounding sentences to predict the correct meaning of the acronym. The prototype machine-learning models created from this dataset have not been released.</p>
</blockquote>
<p>So I decided to make my own prototype model and was inspired by an acronym disambiguation white paper from Courant Institute, NYU <span class="citation">(<a href="#ref-Turtel2007AcronymD" role="doc-biblioref">Turtel and Shasha 2007</a>)</span>.</p>
<div id="description" class="section level2 hasAnchor" number="2.1">
<h2><span class="header-section-number">2.1</span> Description<a href="nasa-svm.html#description" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>Goal:</strong> Use an SVM and statistical analysis (of words/context) to properly classify ambiguous acronym definitions based on provided data.</p>
<ul>
<li>Acronym disambiguation is the process of determining the correct expansion/definition of an acronym in a given context
<ul>
<li>These specific acronyms have multiple definitions, making them ambiguous when undefined</li>
</ul></li>
<li>Ambiguous sentences contain undefined acronyms, whereas unambiguous sentences contain both the acronyms and their expansions</li>
</ul>
<p><strong>Example:</strong></p>
<p>In the given NASA abstracts, the acronym IMF is used with two separate definitions:</p>
<ol style="list-style-type: decimal">
<li>Interplanetary Magnetic Field (32 instances)</li>
<li>Intrinsic Mode Functions (14 instances)</li>
</ol>
<p>Given an ambiguous sentence containing an ambiguous acronym:</p>
<blockquote>
<p>Expressed in the IMFs, they have well-behaved Hilbert Transforms from which instantaneous frequencies can be calculated.</p>
</blockquote>
<p>The algorithm guesses what IMF stands for (in this case, Intrinsic Mode Functions) based on three different contexts: ambiguous, unambiguous, and total (the whole abstract).</p>
<div id="data" class="section level3 hasAnchor" number="2.1.1">
<h3><span class="header-section-number">2.1.1</span> Data<a href="nasa-svm.html#data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Each line in <code>processed_acronyms.jsonl</code> is an acronym found to have more than one definition; there are 484.</p>
<p>However, according to the dataset&#x2019;s description, this isn&#x2019;t quality data &#x2013; insofar as what is defined as a &#x201C;proper&#x201D; alternate definition/expansion (see <a href="nasa-svm.html#nasa-fw">Future Work</a> section), along with a couple of wonky results too (see below).</p>
<p>For example, &#x201C;TOMS&#x201D; isn&#x2019;t really an ambiguous acronym:</p>
<ol style="list-style-type: decimal">
<li>Total Ozone Mapping Spectrometer</li>
<li>Ozone Mapping Spectrometer (</li>
</ol>
<p>This algorithm works for any legitimate ambiguous acronym within the dataset.</p>
<p>Example usage:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="nasa-svm.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/usr/bin/env bash</span></span>
<span id="cb1-2"><a href="nasa-svm.html#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="ex">python3</span> nasa_svm.py <span class="op">&lt;</span>acronym<span class="op">&gt;</span> [--v]</span></code></pre></div>
<p>I could&#x2019;ve tailored the algorithm to sift through &#x2013; then run on &#x2013; every legitimate acronym, but for brevity&#x2019;s sake I selected 10 acronyms with 2 definitions, 5 acronyms with 3 definitions, and 1 acronym with 4 definitions (roughly paralleling the distribution):</p>
<p><strong>Acronyms</strong></p>
<p><code>1. &quot;US&quot;: &apos;United States&apos;, &apos;Upper Stage&apos;</code></p>
<p><code>2. &quot;SST&quot;: &apos;Sea Surface Temperature&apos;, &apos;Shear Stress Transport&apos;</code></p>
<p><code>3. &quot;IMF&quot;: &apos;Interplanetary Magnetic Field&apos;, &apos;Intrinsic Mode Functions&apos;</code></p>
<p><code>4. &quot;VMS&quot;: &apos;Vertical Motion Simulator&apos;, &apos;Visual Motion Simulator&apos;</code></p>
<p><code>5. &quot;RMS&quot;: &apos;Remote Manipulator System&apos;, &apos;Root Mean Square&apos;</code></p>
<p><code>6. &quot;DOE&quot;: &apos;Department of Energy&apos;, &apos;Design of Experiments&apos;</code></p>
<p><code>7. &quot;NAS&quot;: &apos;National Airspace System&apos;, &apos;Numerical Aerodynamic Simulation&apos;</code></p>
<p><code>8. &quot;LET&quot;: &apos;Linear Energy Transfer&apos;, &apos;Link Evaluation Terminal&apos;</code></p>
<p><code>9. &quot;MLS&quot;: &apos;Microwave Limb Sounder&apos;, &apos;Microwave Landing System&apos;</code></p>
<p><code>10. &quot;RCS&quot;: &apos;Reaction Control System&apos;, &apos;Radar Cross Section&apos;</code></p>
<p><code>11. &quot;ISO&quot;: &apos;Infrared Space Observatory&apos;, &apos;International Standards Organization&apos;, &apos;Imaging Spectrometric Observatory&apos;</code></p>
<p><code>12. &quot;CM&quot;: &apos;Crew Module&apos;, &apos;Command Module&apos;, &apos;Configuration Management&apos;</code></p>
<p><code>13. &quot;PEM&quot;: &apos;Pressurized Excursion Module&apos;, &apos;Proton Exchange Membrane&apos;, &apos;Pacific Exploratory Mission&apos;</code></p>
<p><code>14. &quot;CRM&quot;: &apos;Common Research Model&apos;, &apos;Cockpit Resource Management&apos;, &apos;Crew Resource Management&apos;</code></p>
<p><code>15. &quot;LCC&quot;: &apos;Launch Control Center&apos;, &apos;Launch Commit Criteria&apos;, &apos;Life Cycle Cost&apos;</code></p>
<p><code>16. &quot;ATM&quot;: &apos;Air Traffic Management&apos;, &apos;Asynchronous Transfer Mode&apos;, &apos;Apollo Telescope Mount&apos;, &apos;Airborne Topographic Mapper&apos;</code></p>
</div>
</div>
<div id="algorithm" class="section level2 hasAnchor" number="2.2">
<h2><span class="header-section-number">2.2</span> Algorithm<a href="nasa-svm.html#algorithm" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>Skeleton:</strong></p>
<pre><code>INPUT: Acronym from NASA abstract

Filter all relevant abstracts
FOR each acronym definition:
    Find and extract all sentences containing acronym
    Separate into ambiguous and unambiguous
    Remove both the definitions and acronyms
END
Randomly sample test sentences containing ambiguous acronym
    Extract and remove these from training set
Build feature vector of surrounding meaningful words for context
    Concat sentences for each definition as the n documents for tf-idf
Train multi-class linear SVCs to yield word frequency coefficients
    Three models: ambiguous, unambiguous, and total contexts
FOR each test sentence:
    Create feature vector and feed into model for prediction
    Grade predictions
END

OUTPUT: results in csv format for analysis</code></pre>
<p><strong>CSV Output:</strong></p>
<p>The acronym along with the accuracies for the ambiguous, unambiguous, and total (combined) contexts.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="nasa-svm.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">python3</span> nasa_svm.py DOE</span></code></pre></div>
<pre><code>## DOE 0.9491525423728814 0.9661016949152542 0.9661016949152542</code></pre>
<p>Accuracies are used as the scoring metric as it&#x2019;s equivalent to the micro-weighted aggregate F-beta score given the class imbalance in the data (see <a href="rsql.html#analysis-1">Analysis</a>).</p>
<p><strong>Verbose Output:</strong></p>
<p>Provides more insight such as the number of training examples for each definition, the confusion matrices, and F1-scores for each model (to show performance in each class).</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="nasa-svm.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="bu">time</span> python3 nasa_svm.py ISO <span class="at">--v</span></span></code></pre></div>
<pre><code>## -------------------------
## Test set: (n = 30)
## Infrared Space Observatory: 23
## International Standards Organization: 2
## Imaging Spectrometric Observatory: 5
## 
## Ambiguous n: 120      slices: [93, 15, 13]
## Unambiguous n: 105    slices: [80, 14, 12]
## Combined n: 712   slices: [544, 99, 70]
## 
## Guess (ambiguous) MCM &amp; F1:
## [[[ 5  2]
##   [ 3 20]]
## 
##  [[28  0]
##   [ 1  1]]
## 
##  [[21  4]
##   [ 2  3]]]
## Infrared Space Observatory: 0.888888888888889
## International Standards Organization: 0.6666666666666666
## Imaging Spectrometric Observatory: 0.5
## 
## Guess (unambiguous) MCM &amp; F1:
## [[[ 6  1]
##   [ 4 19]]
## 
##  [[27  1]
##   [ 0  2]]
## 
##  [[21  4]
##   [ 2  3]]]
## Infrared Space Observatory: 0.8837209302325583
## International Standards Organization: 0.8
## Imaging Spectrometric Observatory: 0.5
## 
## Guess (combined) MCM &amp; F1:
## [[[ 2  5]
##   [ 1 22]]
## 
##  [[28  0]
##   [ 1  1]]
## 
##  [[24  1]
##   [ 4  1]]]
## Infrared Space Observatory: 0.8800000000000001
## International Standards Organization: 0.6666666666666666
## Imaging Spectrometric Observatory: 0.28571428571428575
## 
## Accuracy (ambiguous): 0.8
## Accuracy (unambiguous): 0.8
## Accuracy (combined): 0.8
## 
## real 0m4.267s
## user 0m3.655s
## sys  0m1.080s</code></pre>
<p>A bag of words model is implemented for the test samples, one for each of the context vocabularies. This allows for proper feature vectors to be created for classification.</p>
<p>The SVM is implemented with <code>scikit-learn</code> as a support vector classifier (SVC) using a linear kernel.</p>
<p>Model parameters (e.g., <code>C</code>) were chosen from the aforementioned white paper, therefore fine-tuning via cross-validation, etc., is not included here but proposed in the <a href="nasa-svm.html#todo">TODO</a> section for when future improvements are implemented.</p>
<p>The SVC uses a one-vs-one (OVO) shape for the decision function (<a href="https://stackoverflow.com/questions/59497115/svc-multiclass-classification-ovo-decision-function-explanation">see under the hood</a>), which in the case of binary classification always considers the distance from the hyperplane.</p>
<ul>
<li>I.e., how &#x201C;deep&#x201D; the data point is in a specific class&#x2019; area</li>
</ul>
<p>This also contributes to why the algorithm works so well for 2 definitions but poorly for 3-4 (see <a href="nasa-svm.html#conclusions">Conclusions</a>).</p>
</div>
<div id="analysis" class="section level2 hasAnchor" number="2.3">
<h2><span class="header-section-number">2.3</span> Analysis<a href="nasa-svm.html#analysis" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Given the slices shown in verbose output, almost every acronym seems to have a dominant definition which appears 2-5 times more often than the others.</p>
<p>Since the test sentences are randomly sampled, I made sure that each definition is included for every test set.</p>
<p>This class imbalance, along with the sample sizes for the training sets being pretty small, causes trouble when the model tries classifying acronyms with more than 2 definitions.</p>
<p>I also added a classifier trained with <em>all</em> the sentences in the abstracts for each acronym as a combined context to see if stripping &#x201C;noise&#x201D; helped. My guess is that since the training sets are small, every bit of text matters.</p>
<ul>
<li>Collecting only the surrounding words in sentences containing acronyms (as opposed to using the whole abstract for example) should work best with a larger training set</li>
</ul>
<div id="scripts" class="section level3 hasAnchor" number="2.3.1">
<h3><span class="header-section-number">2.3.1</span> Scripts<a href="nasa-svm.html#scripts" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>For example, running the script 5 times and writing to csv files:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="nasa-svm.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/zsh</span></span>
<span id="cb7-2"><a href="nasa-svm.html#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> acronym <span class="kw">in</span> US SST IMF VMS RMS DOE NAS LET MLS RCS ISO CM PEM CRM LCC ATM</span>
<span id="cb7-3"><a href="nasa-svm.html#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="cf">do</span></span>
<span id="cb7-4"><a href="nasa-svm.html#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="bu">printf</span> <span class="st">&apos;Writing to ./nasa-svm_data/results/output_%s.txt\n&apos;</span> <span class="st">&quot;</span><span class="va">$acronym</span><span class="st">&quot;</span></span>
<span id="cb7-5"><a href="nasa-svm.html#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> i <span class="kw">in</span> <span class="dt">{</span><span class="dv">1</span><span class="dt">..</span><span class="dv">5</span><span class="dt">}</span></span>
<span id="cb7-6"><a href="nasa-svm.html#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">do</span></span>
<span id="cb7-7"><a href="nasa-svm.html#cb7-7" aria-hidden="true" tabindex="-1"></a>        <span class="ex">python3</span> nasa_svm.py <span class="va">$acronym</span> <span class="op">&gt;&gt;</span> nasa-svm_data/results/output_<span class="va">${acronym}</span>.csv</span>
<span id="cb7-8"><a href="nasa-svm.html#cb7-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">done</span></span>
<span id="cb7-9"><a href="nasa-svm.html#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="cf">done</span></span></code></pre></div>
<p>Quick analysis using python:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb8-1"><a href="nasa-svm.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> csv</span>
<span id="cb8-2"><a href="nasa-svm.html#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb8-3"><a href="nasa-svm.html#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> glob <span class="im">import</span> glob</span>
<span id="cb8-4"><a href="nasa-svm.html#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="nasa-svm.html#cb8-5" aria-hidden="true" tabindex="-1"></a>file_list <span class="op">=</span> glob(<span class="st">&quot;nasa-svm_data/results/*.csv&quot;</span>)</span>
<span id="cb8-6"><a href="nasa-svm.html#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="nasa-svm.html#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="bu">file</span> <span class="kw">in</span> file_list:</span>
<span id="cb8-8"><a href="nasa-svm.html#cb8-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">with</span> <span class="bu">open</span>(<span class="bu">file</span>, newline<span class="op">=</span><span class="st">&apos;&apos;</span>) <span class="im">as</span> csvfile:</span>
<span id="cb8-9"><a href="nasa-svm.html#cb8-9" aria-hidden="true" tabindex="-1"></a>    buf <span class="op">=</span> pd.DataFrame(csv.reader(csvfile, delimiter<span class="op">=</span><span class="st">&apos; &apos;</span>, quotechar<span class="op">=</span><span class="st">&apos;|&apos;</span>),</span>
<span id="cb8-10"><a href="nasa-svm.html#cb8-10" aria-hidden="true" tabindex="-1"></a>                       columns<span class="op">=</span>[<span class="st">&apos;acronym&apos;</span>, <span class="st">&apos;acc_amb&apos;</span>, <span class="st">&apos;acc_unamb&apos;</span>,<span class="st">&apos;acc_comb&apos;</span>])</span>
<span id="cb8-11"><a href="nasa-svm.html#cb8-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">file</span> <span class="op">==</span> file_list[<span class="dv">0</span>]:</span>
<span id="cb8-12"><a href="nasa-svm.html#cb8-12" aria-hidden="true" tabindex="-1"></a>      grades <span class="op">=</span> buf</span>
<span id="cb8-13"><a href="nasa-svm.html#cb8-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb8-14"><a href="nasa-svm.html#cb8-14" aria-hidden="true" tabindex="-1"></a>      grades <span class="op">=</span> pd.concat([grades, buf], axis<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb8-15"><a href="nasa-svm.html#cb8-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-16"><a href="nasa-svm.html#cb8-16" aria-hidden="true" tabindex="-1"></a>grades <span class="op">=</span> grades.astype({<span class="st">&apos;acc_amb&apos;</span>:<span class="bu">float</span>, <span class="st">&apos;acc_unamb&apos;</span>:<span class="bu">float</span>, <span class="st">&apos;acc_comb&apos;</span>:<span class="bu">float</span>})</span>
<span id="cb8-17"><a href="nasa-svm.html#cb8-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-18"><a href="nasa-svm.html#cb8-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Take grouped averages and sort by ambiguous</span></span>
<span id="cb8-19"><a href="nasa-svm.html#cb8-19" aria-hidden="true" tabindex="-1"></a>avgs <span class="op">=</span> grades.groupby([<span class="st">&apos;acronym&apos;</span>])[[<span class="st">&apos;acc_amb&apos;</span>, <span class="st">&apos;acc_unamb&apos;</span>, <span class="st">&apos;acc_comb&apos;</span>]].mean()</span>
<span id="cb8-20"><a href="nasa-svm.html#cb8-20" aria-hidden="true" tabindex="-1"></a>avgs <span class="op">=</span> avgs.sort_values([<span class="st">&apos;acc_amb&apos;</span>], ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb8-21"><a href="nasa-svm.html#cb8-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-22"><a href="nasa-svm.html#cb8-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Average accuracies (33 randomly sampled test groups)</span></span>
<span id="cb8-23"><a href="nasa-svm.html#cb8-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(avgs)</span></code></pre></div>
<pre><code>##           acc_amb  acc_unamb  acc_comb
## acronym                               
## IMF      0.990676   0.904429  0.990676
## MLS      0.982290   0.974813  0.979142
## RCS      0.976874   0.974482  0.990431
## US       0.964912   0.974482  0.998405
## LET      0.964349   0.941176  0.998217
## DOE      0.963020   0.954802  0.955316
## SST      0.939394   0.909091  0.944056
## NAS      0.926815   0.913665  0.923957
## RMS      0.921212   0.943434  0.929293
## LCC      0.746212   0.645833  0.700758
## ISO      0.744444   0.762626  0.795960
## VMS      0.741414   0.888889  0.751515
## PEM      0.609626   0.597148  0.661319
## CM       0.608586   0.624579  0.693603
## CRM      0.582888   0.545455  0.549020
## ATM      0.449811   0.462121  0.482008</code></pre>
<div class="sourceCode" id="cb10"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb10-1"><a href="nasa-svm.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Average accuracies for 2 definitions</span></span>
<span id="cb10-2"><a href="nasa-svm.html#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(avgs.head(<span class="dv">10</span>)[[<span class="st">&apos;acc_amb&apos;</span>, <span class="st">&apos;acc_unamb&apos;</span>, <span class="st">&apos;acc_comb&apos;</span>]].mean())</span></code></pre></div>
<pre><code>## acc_amb      0.937576
## acc_unamb    0.913621
## acc_comb     0.941025
## dtype: float64</code></pre>
<div class="sourceCode" id="cb12"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb12-1"><a href="nasa-svm.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Average accuracies for 3 definitions (and one 4)</span></span>
<span id="cb12-2"><a href="nasa-svm.html#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(avgs.tail(<span class="dv">5</span>)[[<span class="st">&apos;acc_amb&apos;</span>, <span class="st">&apos;acc_unamb&apos;</span>, <span class="st">&apos;acc_comb&apos;</span>]].mean())</span></code></pre></div>
<pre><code>## acc_amb      0.598465
## acc_unamb    0.623638
## acc_comb     0.627493
## dtype: float64</code></pre>
</div>
</div>
<div id="conclusions" class="section level2 hasAnchor" number="2.4">
<h2><span class="header-section-number">2.4</span> Conclusions<a href="nasa-svm.html#conclusions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Training the model on entire abstracts provided a marginal increase in accuracy over immediate contexts despite greatly increasing the vocabulary, which hints that most of it is noise. This also makes sense intuitively, given that NASA white paper abstracts are similar in structure.</p>
<p>For 2 definitions this algorithm performs quite well given sparse vocabularies formed from small data.</p>
<p>For more than 2 definitions we run into some problems, the main ones being small training sets and <a href="https://machinelearningmastery.com/what-is-imbalanced-classification/">imbalanced class distributions</a>.</p>
<p>There aren&#x2019;t enough instances to properly train the models, but this is out of our hands. Simply put, the models need more examples of immediate context to capture the greater complexity presented in acronyms with 3-4 definitions &#x2013; which in turn would provide better hyperplanes to separate the definitions.</p>
<p>Also given an OVO decision function, we view multi-label classification as several related binary classification tasks:</p>
<blockquote>
<p>It&#x2019;s harder to distinguish the remaining 2-3 &#x201C;lesser-known&#x201D; definitions from the &#x201C;main/common&#x201D; definition which has the highest frequency; the common definition &#x201C;encroaches,&#x201D; which tends towards more false negatives for the common and more false negatives/positives between the lesser-knowns.</p>
</blockquote>
<div id="todo" class="section level3 hasAnchor" number="2.4.1">
<h3><span class="header-section-number">2.4.1</span> TODO<a href="nasa-svm.html#todo" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Results could be improved by implementing an <em>unbiased</em> classifier, perhaps with a one-vs-all/one-vs-rest (OVA/OVR) decision function (as opposed to the OVO used earlier).</p>
<p>By default, the model assigns equal class weights because it assumes the data is evenly distributed between classes.</p>
<p>For example, with an acronym that has 3 definitions:</p>
<ol style="list-style-type: decimal">
<li>There is an approximate class label ratio of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>&#xA0;</mtext><mo>&#x223C;</mo><mn>3</mn><mo>:</mo><mn>1</mn><mo>:</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\ \sim 3:1:1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"></span><span class="mspace">&#xA0;</span><span class="mrel">&#x223C;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>, but some are different (e.g., <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>&#xA0;</mtext><mo>&#x223C;</mo><mn>1</mn><mo>:</mo><mn>1</mn><mo>:</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">\ \sim 1:1:3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"></span><span class="mspace">&#xA0;</span><span class="mrel">&#x223C;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span></span></span></span>)</li>
<li>Using the <code>class_weight=&apos;balanced&apos;</code> hyperparameter, the SVC decreases the weight of records in the &#x201C;common class&#x201D; in order to balance the weight of the whole class (e.g., 2:1:1 gives <code>[0.75, 1.5, 1.5]</code>)
<ul>
<li>Would have to compare with manually calculated class weights based on each distribution (e.g., 2:1:1 gives <code>[1, 2, 2]</code>)</li>
</ul></li>
<li>Perform <a href="https://machinelearningmastery.com/tour-of-evaluation-metrics-for-imbalanced-classification/">comparative metrics</a> for OVO vs OVR given acronyms with 3-4 definitions</li>
</ol>
</div>
</div>
<div id="nasa-fw" class="section level2 hasAnchor" number="2.5">
<h2><span class="header-section-number">2.5</span> Future Work?<a href="nasa-svm.html#nasa-fw" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>There are a few hundred other acronyms available to play with. The following examples of acronyms could serve as inspiration for another (more complex) project than this one &#x2013; perhaps for:</p>
<ul>
<li>Learning grammar for either correction or more nuanced guesses (see CFD, TRMM, MSS, TES)</li>
<li>Developing some similarity-based merging of classifications (see AVIRIS, NASA, JPL, CCD)</li>
<li>Maybe even a combo of the aforementioned (see GEO)</li>
</ul>
<p><strong>List of Acronyms - Nuanced Definitions:</strong></p>
<p>Including but not limited to:</p>
<p><code>1. &quot;CFD&quot;: &apos;Computational Fluid Dynamics&apos;, &apos;Computational fluid dynamics&apos;</code></p>
<p><code>2. &quot;TRMM&quot;: &apos;Tropical Rainfall Measuring Mission&apos;, &apos;Tropical Rainfall Measurement Mission&apos;, &apos;Tropical Rain Measuring Mission&apos;</code></p>
<p><code>3. &quot;MSS&quot;: &apos;Mobile Satellite Service&apos;, &apos;Mobile Servicing System&apos;</code></p>
<p><code>4. &quot;AVIRIS&quot;: &apos;Airborne Visible/Infrared Imaging Spectrometer&apos;, &apos;Airborne Visible and Infrared Imaging Spectrometer&apos;</code></p>
<p><code>5. &quot;TES&quot;: &apos;Thermal Emission Spectrometer&apos;, &apos;Tropospheric Emission Spectrometer&apos;</code></p>
<p><code>6. &quot;NASA&quot;: &apos;National Aeronautics &amp; Space Administration&apos;, &apos;National Aeronautic and Space Administration&apos;</code></p>
<p><code>7. &quot;JPL&quot;: &apos;Jet Propulsion Laboratory&apos;, &apos;Jet Propulsion Lab&apos;</code></p>
<p><code>8. &quot;CCD&quot;: &apos;Charge Coupled Device&apos;, &apos;Charge Coupled Devices&apos;</code></p>
<p><code>9. &quot;GEO&quot;: &apos;Geosynchronous Earth Orbit&apos;, &apos;geosynchronous Earth orbit&apos;, &apos;Group on Earth Observations&apos;, &apos;Geostationary Earth Orbit&apos;, &apos;geostationary Earth orbit&apos;</code></p>
<p><strong>Useful Metadata:</strong></p>
<p>Each acronym definition also has &#x201C;NASA terms&#x201D; attached to it, for example IMF comes with some &#x201C;additional context&#x201D; which can be utilized.</p>
<p><code>1. Interplanetary Magnetic Field: &apos;SOLAR MAGNETIC FIELD&apos;, &apos;SOLAR WIND&apos;, &apos;INTERPLANETARY MAGNETIC FIELDS&apos;, &apos;MAGNETIC FLUX&apos;, &apos;MAGNETIC PROBES&apos;, &apos;SPACE PROBES&apos;</code></p>
<p><code>2. Intrinsic Mode Functions: &apos;HILBERT TRANSFORMATION&apos;, &apos;SPECTRAL EMISSION&apos;, &apos;DECOMPOSITION&apos;, &apos;SPECTRUM ANALYSIS&apos;, &apos;TIME FUNCTIONS&apos;, &apos;FREQUENCY DISTRIBUTION&apos;, &apos;NONLINEARITY&apos;, &apos;TIME SERIES ANALYSIS&apos;, &apos;NONLINEAR SYSTEMS&apos;, &apos;NONLINEAR EQUATIONS&apos;</code></p>
</div>
<div id="source-code" class="section level2 unnumbered hasAnchor">
<h2>Source Code<a href="nasa-svm.html#source-code" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The source code for this project can be downloaded or viewed and copied to the clipboard below:</p>
<a href="data:text/x-python;base64,aW1wb3J0IGpzb24KaW1wb3J0IHJlCmltcG9ydCBubHRrCmltcG9ydCBwYW5kYXMgYXMgcGQKaW1wb3J0IG51bXB5IGFzIG5wCmZyb20gc2tsZWFybi5mZWF0dXJlX2V4dHJhY3Rpb24udGV4dCBpbXBvcnQgVGZpZGZWZWN0b3JpemVyLCBDb3VudFZlY3Rvcml6ZXIKZnJvbSBza2xlYXJuLm1ldHJpY3MgaW1wb3J0IGNvbmZ1c2lvbl9tYXRyaXgsIG11bHRpbGFiZWxfY29uZnVzaW9uX21hdHJpeCwgZjFfc2NvcmUKZnJvbSBza2xlYXJuLnN2bSBpbXBvcnQgU1ZDCmZyb20gZnVuY3Rvb2xzIGltcG9ydCByZWR1Y2UKaW1wb3J0IHJhbmRvbQppbXBvcnQgb3BlcmF0b3IKaW1wb3J0IHN5cwojbmx0ay5kb3dubG9hZCgncHVua3QnKQojbmx0ay5kb3dubG9hZCgnc3RvcHdvcmRzJykKCmRlZiBwcmVwcm9jZXNzKHNlbnRlbmNlcywgc2xpY2VzLCBuYW1lcyA9IE5vbmUsIHRmaWRmID0gVHJ1ZSwgY29udGV4dCA9IE5vbmUpOgogICAgaWYgY29udGV4dCBpcyBOb25lOiBjb250ZXh0ID0gW10KICAgIGZvciBpLCBzIGluIGVudW1lcmF0ZShzbGljZXMpOgogICAgICAgIGlmIGkgPT0gMDoKICAgICAgICAgICAgY29udGV4dC5hcHBlbmQoJyAnLmpvaW4oc2VudGVuY2VzWzpzXSkpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgY29udGV4dC5hcHBlbmQoJyAnLmpvaW4oc2VudGVuY2VzW3NsaWNlc1tpLTFdOihzICsgc2xpY2VzW2ktMV0pXSkpCiAgICBjb250ZXh0ID0gY2xlYW5lcihjb250ZXh0KQogICAgaWYgdGZpZGY6CiAgICAgICAgaWYgbmFtZXMgaXMgTm9uZToKICAgICAgICAgICAgdmVjdG9ycywgdm9jYWIgPSB0Zl9pZGYoY29udGV4dCkKICAgICAgICBlbHNlOgogICAgICAgICAgICB2ZWN0b3JzLCB2b2NhYiA9IHRmX2lkZihjb250ZXh0LCBuYW1lcykKICAgICAgICByZXR1cm4gdmVjdG9ycywgdm9jYWIKICAgIGVsc2U6CiAgICAgICAgcmV0dXJuIGNvbnRleHQKCmRlZiBjbGVhbmVyKGNvbnRleHQpOgogICAgY29udGV4dCA9IFtyZS5zdWIocidcdypcZFx3KicsICcnLCB3KSBmb3IgdyBpbiBjb250ZXh0XQogICAgY29udGV4dCA9IFtyZS5zdWIocidbXkEtWmEtejAtOSBdKycsICcnLCB3KSBmb3IgdyBpbiBjb250ZXh0XQogICAgY29udGV4dCA9IFtyZS5zdWIocidccysnLCAnICcsIHcpIGZvciB3IGluIGNvbnRleHRdCiAgICByZXR1cm4gY29udGV4dAoKZGVmIGZpbHRlcmVkKHNlbnRlbmNlLCBrZXl3b3Jkcyk6CiAgICBmb3IgayBpbiBrZXl3b3JkczoKICAgICAgICBzZW50ZW5jZSA9IHNlbnRlbmNlLnJlcGxhY2UoaywgJycpCiAgICByZXR1cm4gc2VudGVuY2UKCmRlZiB0Zl9pZGYoY29udGV4dCwgbmFtZXMgPSBOb25lKToKICAgIHZlY3Rvcml6ZXIgPSBUZmlkZlZlY3Rvcml6ZXIoc3RvcF93b3Jkcz0nZW5nbGlzaCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuX3BhdHRlcm49cicoP3UpXGJbQS1aYS16XStcYicpCiAgICB2ZWN0b3IgPSB2ZWN0b3JpemVyLmZpdF90cmFuc2Zvcm0oY29udGV4dCkKICAgIHZvY2FiID0gdmVjdG9yaXplci52b2NhYnVsYXJ5XwogICAgdG9rZW5zID0gdmVjdG9yaXplci5nZXRfZmVhdHVyZV9uYW1lc19vdXQoKQogICAgZGZfdGZpZGYgPSBwZC5EYXRhRnJhbWUoZGF0YT12ZWN0b3IudG9hcnJheSgpLCBpbmRleD1uYW1lcywgY29sdW1ucz10b2tlbnMpCiAgICByZXR1cm4gZGZfdGZpZGYsIHZvY2FiCgpkZWYgYm93KGNvbnRleHQsIG5hbWVzID0gTm9uZSwgdm9jYWIgPSBOb25lKToKICAgIHZlY3Rvcml6ZXIgPSBDb3VudFZlY3Rvcml6ZXIoc3RvcF93b3Jkcz0nZW5nbGlzaCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuX3BhdHRlcm49cicoP3UpXGJbQS1aYS16XStcYicsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvY2FidWxhcnk9dm9jYWIpCiAgICB2ZWN0b3IgPSB2ZWN0b3JpemVyLmZpdF90cmFuc2Zvcm0oY29udGV4dCkKICAgIHRva2VucyA9IHZlY3Rvcml6ZXIuZ2V0X2ZlYXR1cmVfbmFtZXNfb3V0KCkKICAgIGRmX2JvdyA9IHBkLkRhdGFGcmFtZShkYXRhPXZlY3Rvci50b2FycmF5KCksIGluZGV4PW5hbWVzLCBjb2x1bW5zPXRva2VucykKICAgIHJldHVybiBkZl9ib3cKCnRva2VuaXplciA9IG5sdGsuZGF0YS5sb2FkKCd0b2tlbml6ZXJzL3B1bmt0L2VuZ2xpc2gucGlja2xlJykKYWNyb255bV9saXN0ID0gWydVUycsJ1NTVCcsJ0lNRicsJ1ZNUycsJ1JNUycsJ0RPRScsJ05BUycsJ0xFVCcsCiAgICAgICAgICAgICAgICAnTUxTJywnUkNTJywnSVNPJywnQ00nLCdQRU0nLCdDUk0nLCdMQ0MnLCdBVE0nXQoKd2l0aCBvcGVuKCduYXNhLXN2bV9kYXRhL3Byb2Nlc3NlZC9wcm9jZXNzZWRfYWNyb255bXMuanNvbmwnLCAncicpIGFzIGpzb25fYWNyb255bXMsIG9wZW4oJ25hc2Etc3ZtX2RhdGEvcmF3L3Jlc3VsdHNfbWVyZ2VkLmpzb25sJywgJ3InKSBhcyBqc29uX2NvcnB1czoKCiAgICBpZiBsZW4oc3lzLmFyZ3YpID4gMToKICAgICAgICBpZiBzeXMuYXJndlsxXSBpbiBhY3JvbnltX2xpc3Q6CiAgICAgICAgICAgIGFjcm9ueW0gPSBzeXMuYXJndlsxXQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHByaW50KCJFeGFtcGxlIFVzYWdlOiBweXRob24zIG5hc2Ffc3ZtLnB5IDxhY3JvbnltPiBbLS12XSIpCiAgICAgICAgICAgIHByaW50KGYnQWNyb255bXM6IHthY3JvbnltX2xpc3R9JykKICAgICAgICAgICAgZXhpdCgpCiAgICBlbHNlOgogICAgICAgIGFjcm9ueW0gPSByYW5kb20uY2hvaWNlKGFjcm9ueW1fbGlzdCkKCiAgICBqc29uX2xpc3QgPSBsaXN0KGpzb25fYWNyb255bXMpCiAgICBqc29uX2xpc3RfY29ycHVzID0gbGlzdChqc29uX2NvcnB1cykKICAgIGFtYmlndW91cywgc2VudGVuY2VzLCBjb21iaW5lZCwgbmFtZXMsIHRlcm1zID0gW10sIFtdLCBbXSwgW10sIFtdCiAgICBzbGljZXMsIHNsaWNlc19hbWIsIHNsaWNlc19jbWIsIHNsaWNlc19hbWJfaW5kID0gW10sIFtdLCBbXSwgW10KICAgIGd1ZXNzLCBndWVzc19hbWIsIGd1ZXNzX2NtYiwgZ3JhZGVzID0gW10sIFtdLCBbXSwgW10KCiAgICBmb3IganNvbl9zdHIgaW4ganNvbl9saXN0OgogICAgICAgIHJlc3VsdCA9IGpzb24ubG9hZHMoanNvbl9zdHIpCiAgICAgICAgaWYgcmVzdWx0WydhY3JvbnltJ10gPT0gYWNyb255bToKICAgICAgICAgICAga2V5d29yZHMgPSBbcmVzdWx0WydkZWZpbml0aW9uJ10gKyAiICgiICsgcmVzdWx0WydhY3JvbnltJ10gKyAiKSIsCiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFsnYWNyb255bSddICsgIiAoIiArIHJlc3VsdFsnZGVmaW5pdGlvbiddICsgIikiLAogICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRbJ2Fjcm9ueW0nXSwgcmVzdWx0WydkZWZpbml0aW9uJ11dCiAgICAgICAgICAgIG5hbWVzLmFwcGVuZChyZXN1bHRbJ2RlZmluaXRpb24nXSkKICAgICAgICAgICAgIyBGb3IgYWxsIHRoZSBhYnN0cmFjdHMgd2hlcmUgYWNyb255bSB2YXJpYW50IGlzIGZvdW5kCiAgICAgICAgICAgIGZvciBpbmRleCBpbiByZXN1bHRbJ2NvcnB1c19wb3NpdGlvbnMnXToKICAgICAgICAgICAgICAgIGpzb25fYWJzdHJhY3QgPSBqc29uX2xpc3RfY29ycHVzW2luZGV4XQogICAgICAgICAgICAgICAgIyBUYWtlIGFic3RyYWN0LCBzcGxpdCBlYWNoIGludG8gc2VudGVuY2VzCiAgICAgICAgICAgICAgICBhYnN0cmFjdCA9IGpzb24ubG9hZHMoanNvbl9hYnN0cmFjdClbJ2Rlc2NyaXB0aW9uJ10KICAgICAgICAgICAgICAgIHBhcnNlZCA9IHRva2VuaXplci50b2tlbml6ZShzdHIoYWJzdHJhY3QpKQogICAgICAgICAgICAgICAgIyBGaWx0ZXIgc2VudGVuY2VzIGFuZCBmZWVkIGludG8gc3BsaXQgYnVja2V0CiAgICAgICAgICAgICAgICBmb3Igc2VudGVuY2UgaW4gcGFyc2VkOgogICAgICAgICAgICAgICAgICAgICMgQWxsIG9mIHRoZSBzZW50ZW5jZXMgd2l0aCBrZXl3b3JkcyByZW1vdmVkCiAgICAgICAgICAgICAgICAgICAgY29tYmluZWQuYXBwZW5kKHNlbnRlbmNlKQogICAgICAgICAgICAgICAgICAgIGNvbWJpbmVkWy0xXSA9IGZpbHRlcmVkKGNvbWJpbmVkWy0xXSwga2V5d29yZHMpCiAgICAgICAgICAgICAgICAgICAgaWYgc2VudGVuY2UuZmluZChrZXl3b3Jkc1swXSkgIT0gLTEgb3Igc2VudGVuY2UuZmluZChrZXl3b3Jkc1sxXSkgIT0gLTE6CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbnRlbmNlcy5hcHBlbmQoc2VudGVuY2UpCiAgICAgICAgICAgICAgICAgICAgICAgICMgUmVtb3ZlIGFjcm9ueW1zIGFuZCB0aGVpciBkZWZpbml0aW9ucwogICAgICAgICAgICAgICAgICAgICAgICBzZW50ZW5jZXNbLTFdID0gZmlsdGVyZWQoc2VudGVuY2VzWy0xXSwga2V5d29yZHMpCiAgICAgICAgICAgICAgICAgICAgICAgICMgQ2hhbmdlICdpZicgYmVsb3cgYmFjayB0byBlbGlmIHRvIGhhdmUgZXZlcnkgc2VudGVuY2UgY29udGFpbmluZwogICAgICAgICAgICAgICAgICAgICAgICAjIGJvdGggZGVmaW5pdGlvbi9hY3JvbnltIHBhaXIgQU5EIHVuZGVmaW5lZCBhY3JvbnltcwogICAgICAgICAgICAgICAgICAgICAgICAjIGNvbnNpZGVyZWQgYXMgb25seSBwYXJ0IG9mIFtzZW50ZW5jZXNdIChOT1QgYWxzbyBhbWJpZ3VvdXMpCiAgICAgICAgICAgICAgICAgICAgICAgICMgYWxzbyBjaGFuZ2Ugc2VudGVuY2VzWy0xXSBiZWxvdyBiYWNrIHRvIHNlbnRlbmNlCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHNlbnRlbmNlLmZpbmQoa2V5d29yZHNbMl0pICE9IC0xOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1iaWd1b3VzLmFwcGVuZChzZW50ZW5jZXNbLTFdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1iaWd1b3VzWy0xXSA9IGZpbHRlcmVkKGFtYmlndW91c1stMV0sIGtleXdvcmRzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBBbWJpZ3VvdXMgc2xpY2VzIHcuci50LiBkZWZpbml0aW9ucwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpY2VzX2FtYl9pbmQuYXBwZW5kKGluZGV4KQogICAgICAgICAgICAgICAgICAgIGVsaWYgc2VudGVuY2UuZmluZChrZXl3b3Jkc1syXSkgIT0gLTE6CiAgICAgICAgICAgICAgICAgICAgICAgIGFtYmlndW91cy5hcHBlbmQoc2VudGVuY2UpCiAgICAgICAgICAgICAgICAgICAgICAgIGFtYmlndW91c1stMV0gPSBmaWx0ZXJlZChhbWJpZ3VvdXNbLTFdLCBrZXl3b3JkcykKICAgICAgICAgICAgICAgICAgICAgICAgIyBBbWJpZ3VvdXMgc2xpY2VzIHcuci50LiBkZWZpbml0aW9ucwogICAgICAgICAgICAgICAgICAgICAgICBzbGljZXNfYW1iX2luZC5hcHBlbmQoaW5kZXgpCiAgICAgICAgICAgICMgU2xpY2VzIGJhc2VkIG9uIHdoaWNoIGFjcm9ueW0gc2VudGVuY2UgYmVsb25ncyB0bwogICAgICAgICAgICBpZiBsZW4oc2xpY2VzX2FtYikgPT0gMDoKICAgICAgICAgICAgICAgIHNsaWNlc19hbWIuYXBwZW5kKGxlbihzbGljZXNfYW1iX2luZCkpCiAgICAgICAgICAgICAgICBzbGljZXMuYXBwZW5kKGxlbihzZW50ZW5jZXMpKQogICAgICAgICAgICAgICAgc2xpY2VzX2NtYi5hcHBlbmQobGVuKGNvbWJpbmVkKSkKICAgICAgICAgICAgZWxpZiBsZW4oc2xpY2VzX2FtYikgPT0gMToKICAgICAgICAgICAgICAgIHNsaWNlc19hbWIuYXBwZW5kKGxlbihzbGljZXNfYW1iX2luZCkgLSBzbGljZXNfYW1iWzBdICsgMSkKICAgICAgICAgICAgICAgIHNsaWNlcy5hcHBlbmQobGVuKHNlbnRlbmNlcykgLSBzbGljZXNbMF0gKyAxKQogICAgICAgICAgICAgICAgc2xpY2VzX2NtYi5hcHBlbmQobGVuKGNvbWJpbmVkKSAtIHNsaWNlc19jbWJbMF0gKyAxKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgIyBNb3JlIHRoYW4gMiBkZWZpbnRpaW9ucwogICAgICAgICAgICAgICAgc2xpY2VzX2FtYi5hcHBlbmQobGVuKHNsaWNlc19hbWJfaW5kKSAtIHJlZHVjZShvcGVyYXRvci5hZGQsIHNsaWNlc19hbWIpICsgMSkKICAgICAgICAgICAgICAgIHNsaWNlcy5hcHBlbmQobGVuKHNlbnRlbmNlcykgLSByZWR1Y2Uob3BlcmF0b3IuYWRkLCBzbGljZXMpICsgMSkKICAgICAgICAgICAgICAgIHNsaWNlc19jbWIuYXBwZW5kKGxlbihjb21iaW5lZCkgLSByZWR1Y2Uob3BlcmF0b3IuYWRkLCBzbGljZXNfY21iKSArIDEpCiAgICAgICAgICAgICMgT3B0aW9uYWwgYWRkaXRpb25hbCBjb250ZXh1dGFsIHRlcm1zIGZvciBlYWNoIGRlZmluaXRpb24KICAgICAgICAgICAgI3Rlcm1zLmFwcGVuZCgnICcuam9pbihtYXAoc3RyLCBjbGVhbmVyKGpzb24ubG9hZHMoanNvbl9hYnN0cmFjdClbJ3N1YmplY3QuTkFTQVRlcm1zJ10pKSkpCgogICAgIyBFbnN1cmUgYXQgbGVhc3QgMiBzYW1wbGVzIGZyb20gZWFjaCBkZWZpbml0aW9uIGFyZSBleHRyYWN0ZWQKICAgIGdvb2RfYmF0Y2ggPSBGYWxzZQogICAgd2hpbGUgbm90IGdvb2RfYmF0Y2g6CiAgICAgICAgdGVzdGluZ19zZXQgPSByYW5kb20uc2FtcGxlKGFtYmlndW91cywgcm91bmQobGVuKGFtYmlndW91cykvNSkpCiAgICAgICAgdGVzdGluZ19pbmQsIGtleSA9IFtdLCBbXQogICAgICAgICMgRGV0ZXJtaW5lIHdoaWNoIGFjcm9ueW0gdGhlIHJhbmRvbSBzYW1wbGUgYmVsb25ncyB0bwogICAgICAgIGZvciB0IGluIHRlc3Rpbmdfc2V0OgogICAgICAgICAgICBpZiBhbnkodCBpbiB0ZXN0aW5nX3NldCBmb3IgdCBpbiBhbWJpZ3VvdXMpOgogICAgICAgICAgICAgICAgdGVzdGluZ19pbmQuYXBwZW5kKGFtYmlndW91cy5pbmRleCh0KSkKICAgICAgICAgICAgICAgIGZvciBjb3VudCwgaSBpbiBlbnVtZXJhdGUoc2xpY2VzX2FtYik6CiAgICAgICAgICAgICAgICAgICAgc3RhcnQgPSBsZW4oYW1iaWd1b3VzKSAtIHN1bShzbGljZXNfYW1iW2NvdW50Ol0sIC0xKQogICAgICAgICAgICAgICAgICAgIGlmIGFtYmlndW91cy5pbmRleCh0KSBpbiByYW5nZShzdGFydCwgaStzdGFydCk6CiAgICAgICAgICAgICAgICAgICAgICAgIGtleS5hcHBlbmQobmFtZXNbY291bnRdKQogICAgICAgIGtleV9jb3VudHMgPSB7aTprZXkuY291bnQoaSkgZm9yIGkgaW4gbmFtZXN9CiAgICAgICAgZ29vZF9jb3VudCA9IHtrOnYgZm9yIChrLHYpIGluIGtleV9jb3VudHMuaXRlbXMoKSBpZiB2ID4gMX0KICAgICAgICBpZiBsZW4oa2V5X2NvdW50cykgPT0gbGVuKGdvb2RfY291bnQpOgogICAgICAgICAgICBnb29kX2JhdGNoID0gVHJ1ZQoKICAgICMgVXBkYXRlIHNsaWNlcwogICAga2V5X2NvdW50cyA9IHtpOmtleS5jb3VudChpKSBmb3IgaSBpbiBuYW1lc30KICAgIHNsaWNlc19hbWIgPSBbYV9pIC0gYl9pIGZvciBhX2ksIGJfaSBpbiB6aXAoc2xpY2VzX2FtYiwga2V5X2NvdW50cy52YWx1ZXMoKSldCiAgICBzbGljZXNfY21iID0gW2FfaSAtIGJfaSBmb3IgYV9pLCBiX2kgaW4gemlwKHNsaWNlc19jbWIsIGtleV9jb3VudHMudmFsdWVzKCkpXQoKICAgICMgUmVtb3ZlIHNhbXBsZSBmcm9tIHRyYWluaW5nIHNldAogICAgZm9yIHQgaW4gdGVzdGluZ19zZXQ6CiAgICAgICAgaWYgYW55KHQgaW4gdGVzdGluZ19zZXQgZm9yIHQgaW4gYW1iaWd1b3VzKToKICAgICAgICAgICAgYW1iaWd1b3VzLnJlbW92ZSh0KQogICAgICAgIGlmIGFueSh0IGluIHRlc3Rpbmdfc2V0IGZvciB0IGluIGNvbWJpbmVkKToKICAgICAgICAgICAgY29tYmluZWQucmVtb3ZlKHQpCgogICAgIyBCdWlsZCBtb2RlbHMKICAgIGNvbnRleHQsIHZvY2FiID0gcHJlcHJvY2VzcyhzZW50ZW5jZXMsIHNsaWNlcywgbmFtZXMpCiAgICBtb2RlbCA9IFNWQyhDPTEuLCBrZXJuZWw9J2xpbmVhcicsIGRlY2lzaW9uX2Z1bmN0aW9uX3NoYXBlPSdvdm8nKQogICAgbW9kZWwuZml0KGNvbnRleHQsIG5hbWVzKQoKICAgIGNvbnRleHRfYW1iLCB2b2NhYl9hbWIgPSBwcmVwcm9jZXNzKGFtYmlndW91cywgc2xpY2VzX2FtYiwgbmFtZXMpCiAgICBtb2RlbF9hbWIgPSBTVkMoQz0xLiwga2VybmVsPSdsaW5lYXInLCBkZWNpc2lvbl9mdW5jdGlvbl9zaGFwZT0nb3ZvJykKICAgIG1vZGVsX2FtYi5maXQoY29udGV4dF9hbWIsIG5hbWVzKQoKICAgIGNvbnRleHRfY21iLCB2b2NhYl9jbWIgPSBwcmVwcm9jZXNzKGNvbWJpbmVkLCBzbGljZXNfY21iLCBuYW1lcykKICAgIG1vZGVsX2NtYiA9IFNWQyhDPTEuLCBrZXJuZWw9J2xpbmVhcicsIGRlY2lzaW9uX2Z1bmN0aW9uX3NoYXBlPSdvdm8nKQogICAgbW9kZWxfY21iLmZpdChjb250ZXh0X2NtYiwgbmFtZXMpCgogICAgIyBQcmVwYXJlIHRlc3RzIGZvciBwcmVkaWN0aW9uCiAgICB0ZXN0aW5nX3NldCA9IGNsZWFuZXIodGVzdGluZ19zZXQpCiAgICAjIEJhZyBvZiB3b3JkcyBmb3IgYWxsIHRlc3Qgc2VudGVuY2VzCiAgICBkZiA9IGJvdyh0ZXN0aW5nX3NldCwgdm9jYWI9dm9jYWIpCiAgICBkZl9hbWJpZyA9IGJvdyh0ZXN0aW5nX3NldCwgdm9jYWI9dm9jYWJfYW1iKQogICAgZGZfY29tYiA9IGJvdyh0ZXN0aW5nX3NldCwgdm9jYWI9dm9jYWJfY21iKQoKICAgIGZvciBpIGluIHJhbmdlKGxlbih0ZXN0aW5nX3NldCkpOgogICAgICAgIGd1ZXNzLmFwcGVuZChtb2RlbC5wcmVkaWN0KGRmLmxvY1tpXS50b19mcmFtZSgpLlQpKQogICAgICAgIGd1ZXNzX2FtYi5hcHBlbmQobW9kZWxfYW1iLnByZWRpY3QoZGZfYW1iaWcubG9jW2ldLnRvX2ZyYW1lKCkuVCkpCiAgICAgICAgZ3Vlc3NfY21iLmFwcGVuZChtb2RlbF9jbWIucHJlZGljdChkZl9jb21iLmxvY1tpXS50b19mcmFtZSgpLlQpKQogICAgcmVzdWx0cyA9IHBkLkRhdGFGcmFtZShbZ3Vlc3NfYW1iLCBndWVzcywgZ3Vlc3NfY21iLGtleV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4PVsnR3Vlc3MgKGFtYmlndW91cyknLCAnR3Vlc3MgKHVuYW1iaWd1b3VzKScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnR3Vlc3MgKGNvbWJpbmVkKScsICdDb3JyZWN0IEFuc3dlciddKQogICAgZm9yIGkgaW4gcmVzdWx0cy5pbmRleFs6M106CiAgICAgICAgZ3JhZGVzLmFwcGVuZChucC53aGVyZShyZXN1bHRzLmxvY1snQ29ycmVjdCBBbnN3ZXInXSA9PSByZXN1bHRzLmxvY1tpXSwgVHJ1ZSwgRmFsc2UpKQoKICAgIGlmIGxlbihzeXMuYXJndikgPiAyOgogICAgICAgIGlmIHN5cy5hcmd2WzJdID09ICctLXYnOgogICAgICAgICAgICBwcmludCgiLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSIpCiAgICAgICAgICAgIHByaW50KGYnVGVzdCBzZXQ6IChuID0ge2xlbih0ZXN0aW5nX3NldCl9KScpCiAgICAgICAgICAgIGZvciBrZXksIHZhbHVlIGluIGtleV9jb3VudHMuaXRlbXMoKToKICAgICAgICAgICAgICAgIHByaW50KGYne2tleX06IHt2YWx1ZX0nKQogICAgICAgICAgICBwcmludChmJ1xuQW1iaWd1b3VzIG46IHtsZW4oYW1iaWd1b3VzKX0gXHQgc2xpY2VzOiB7c2xpY2VzX2FtYn0nKQogICAgICAgICAgICBwcmludChmJ1VuYW1iaWd1b3VzIG46IHtsZW4oc2VudGVuY2VzKX0gXHQgc2xpY2VzOiB7c2xpY2VzfScpCiAgICAgICAgICAgIHByaW50KGYnQ29tYmluZWQgbjoge2xlbihjb21iaW5lZCl9IFx0IHNsaWNlczoge3NsaWNlc19jbWJ9JykKICAgICAgICAgICAgaWYgbGVuKG5hbWVzKSA+IDI6CiAgICAgICAgICAgICAgICBmb3IgaSBpbiByZXN1bHRzLmluZGV4WzozXToKICAgICAgICAgICAgICAgICAgICBwcmludChmJ1xue2l9IE1DTSAmIEYxOicpCiAgICAgICAgICAgICAgICAgICAgcHJpbnQobXVsdGlsYWJlbF9jb25mdXNpb25fbWF0cml4KGxpc3QocmVzdWx0cy5sb2NbJ0NvcnJlY3QgQW5zd2VyJ10pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0KHJlc3VsdHMubG9jW2ldKSwgbGFiZWxzPW5hbWVzKSkKICAgICAgICAgICAgICAgICAgICBmID0gZGljdCh6aXAobmFtZXMsIGYxX3Njb3JlKGxpc3QocmVzdWx0cy5sb2NbJ0NvcnJlY3QgQW5zd2VyJ10pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdChyZXN1bHRzLmxvY1tpXSksIGF2ZXJhZ2U9Tm9uZSwgbGFiZWxzPW5hbWVzKSkpCiAgICAgICAgICAgICAgICAgICAgZm9yIGtleSwgdmFsdWUgaW4gZi5pdGVtcygpOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludChmJ3trZXl9OiB7dmFsdWV9JykKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGZvciBpIGluIHJlc3VsdHMuaW5kZXhbOjNdOgogICAgICAgICAgICAgICAgICAgIHByaW50KGYnXG57aX0gQ00gJiBGMTonKQogICAgICAgICAgICAgICAgICAgIHByaW50KGNvbmZ1c2lvbl9tYXRyaXgobGlzdChyZXN1bHRzLmxvY1snQ29ycmVjdCBBbnN3ZXInXSksIGxpc3QocmVzdWx0cy5sb2NbaV0pKSkKICAgICAgICAgICAgICAgICAgICBmID0gZGljdCh6aXAobmFtZXMsIGYxX3Njb3JlKGxpc3QocmVzdWx0cy5sb2NbJ0NvcnJlY3QgQW5zd2VyJ10pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdChyZXN1bHRzLmxvY1tpXSksIGF2ZXJhZ2U9Tm9uZSwgbGFiZWxzPW5hbWVzKSkpCiAgICAgICAgICAgICAgICAgICAgZm9yIGtleSwgdmFsdWUgaW4gZi5pdGVtcygpOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludChmJ3trZXl9OiB7dmFsdWV9JykKICAgICAgICAgICAgcHJpbnQoZidcbkFjY3VyYWN5IChhbWJpZ3VvdXMpOiB7c3VtKGdyYWRlc1swXSkvbGVuKHRlc3Rpbmdfc2V0KX0nKQogICAgICAgICAgICBwcmludChmJ0FjY3VyYWN5ICh1bmFtYmlndW91cyk6IHtzdW0oZ3JhZGVzWzFdKS9sZW4odGVzdGluZ19zZXQpfScpCiAgICAgICAgICAgIHByaW50KGYnQWNjdXJhY3kgKGNvbWJpbmVkKToge3N1bShncmFkZXNbMl0pL2xlbih0ZXN0aW5nX3NldCl9JykKICAgIGVsc2U6CiAgICAgICAgcHJpbnQoYWNyb255bSwgc3VtKGdyYWRlc1swXSkvbGVuKHRlc3Rpbmdfc2V0KSwgc3VtKGdyYWRlc1sxXSkvbGVuKHRlc3Rpbmdfc2V0KSwgc3VtKGdyYWRlc1syXSkvbGVuKHRlc3Rpbmdfc2V0KSkK" download="nasa_svm.py">Download nasa_svm.py</a>
<p><br>
</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb14-1"><a href="nasa-svm.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> json</span>
<span id="cb14-2"><a href="nasa-svm.html#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> re</span>
<span id="cb14-3"><a href="nasa-svm.html#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> nltk</span>
<span id="cb14-4"><a href="nasa-svm.html#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb14-5"><a href="nasa-svm.html#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb14-6"><a href="nasa-svm.html#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.feature_extraction.text <span class="im">import</span> TfidfVectorizer, CountVectorizer</span>
<span id="cb14-7"><a href="nasa-svm.html#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> confusion_matrix, multilabel_confusion_matrix, f1_score</span>
<span id="cb14-8"><a href="nasa-svm.html#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.svm <span class="im">import</span> SVC</span>
<span id="cb14-9"><a href="nasa-svm.html#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> functools <span class="im">import</span> <span class="bu">reduce</span></span>
<span id="cb14-10"><a href="nasa-svm.html#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> random</span>
<span id="cb14-11"><a href="nasa-svm.html#cb14-11" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> operator</span>
<span id="cb14-12"><a href="nasa-svm.html#cb14-12" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb14-13"><a href="nasa-svm.html#cb14-13" aria-hidden="true" tabindex="-1"></a><span class="co">#nltk.download(&apos;punkt&apos;)</span></span>
<span id="cb14-14"><a href="nasa-svm.html#cb14-14" aria-hidden="true" tabindex="-1"></a><span class="co">#nltk.download(&apos;stopwords&apos;)</span></span>
<span id="cb14-15"><a href="nasa-svm.html#cb14-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-16"><a href="nasa-svm.html#cb14-16" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> preprocess(sentences, slices, names <span class="op">=</span> <span class="va">None</span>, tfidf <span class="op">=</span> <span class="va">True</span>, context <span class="op">=</span> <span class="va">None</span>):</span>
<span id="cb14-17"><a href="nasa-svm.html#cb14-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> context <span class="kw">is</span> <span class="va">None</span>: context <span class="op">=</span> []</span>
<span id="cb14-18"><a href="nasa-svm.html#cb14-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i, s <span class="kw">in</span> <span class="bu">enumerate</span>(slices):</span>
<span id="cb14-19"><a href="nasa-svm.html#cb14-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> i <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb14-20"><a href="nasa-svm.html#cb14-20" aria-hidden="true" tabindex="-1"></a>            context.append(<span class="st">&apos; &apos;</span>.join(sentences[:s]))</span>
<span id="cb14-21"><a href="nasa-svm.html#cb14-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb14-22"><a href="nasa-svm.html#cb14-22" aria-hidden="true" tabindex="-1"></a>            context.append(<span class="st">&apos; &apos;</span>.join(sentences[slices[i<span class="op">-</span><span class="dv">1</span>]:(s <span class="op">+</span> slices[i<span class="op">-</span><span class="dv">1</span>])]))</span>
<span id="cb14-23"><a href="nasa-svm.html#cb14-23" aria-hidden="true" tabindex="-1"></a>    context <span class="op">=</span> cleaner(context)</span>
<span id="cb14-24"><a href="nasa-svm.html#cb14-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> tfidf:</span>
<span id="cb14-25"><a href="nasa-svm.html#cb14-25" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> names <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb14-26"><a href="nasa-svm.html#cb14-26" aria-hidden="true" tabindex="-1"></a>            vectors, vocab <span class="op">=</span> tf_idf(context)</span>
<span id="cb14-27"><a href="nasa-svm.html#cb14-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb14-28"><a href="nasa-svm.html#cb14-28" aria-hidden="true" tabindex="-1"></a>            vectors, vocab <span class="op">=</span> tf_idf(context, names)</span>
<span id="cb14-29"><a href="nasa-svm.html#cb14-29" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> vectors, vocab</span>
<span id="cb14-30"><a href="nasa-svm.html#cb14-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb14-31"><a href="nasa-svm.html#cb14-31" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> context</span>
<span id="cb14-32"><a href="nasa-svm.html#cb14-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-33"><a href="nasa-svm.html#cb14-33" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> cleaner(context):</span>
<span id="cb14-34"><a href="nasa-svm.html#cb14-34" aria-hidden="true" tabindex="-1"></a>    context <span class="op">=</span> [re.sub(<span class="vs">r&apos;\w*\d\w*&apos;</span>, <span class="st">&apos;&apos;</span>, w) <span class="cf">for</span> w <span class="kw">in</span> context]</span>
<span id="cb14-35"><a href="nasa-svm.html#cb14-35" aria-hidden="true" tabindex="-1"></a>    context <span class="op">=</span> [re.sub(<span class="vs">r&apos;[^A-Za-z0-9 ]+&apos;</span>, <span class="st">&apos;&apos;</span>, w) <span class="cf">for</span> w <span class="kw">in</span> context]</span>
<span id="cb14-36"><a href="nasa-svm.html#cb14-36" aria-hidden="true" tabindex="-1"></a>    context <span class="op">=</span> [re.sub(<span class="vs">r&apos;\s+&apos;</span>, <span class="st">&apos; &apos;</span>, w) <span class="cf">for</span> w <span class="kw">in</span> context]</span>
<span id="cb14-37"><a href="nasa-svm.html#cb14-37" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> context</span>
<span id="cb14-38"><a href="nasa-svm.html#cb14-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-39"><a href="nasa-svm.html#cb14-39" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> filtered(sentence, keywords):</span>
<span id="cb14-40"><a href="nasa-svm.html#cb14-40" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> k <span class="kw">in</span> keywords:</span>
<span id="cb14-41"><a href="nasa-svm.html#cb14-41" aria-hidden="true" tabindex="-1"></a>        sentence <span class="op">=</span> sentence.replace(k, <span class="st">&apos;&apos;</span>)</span>
<span id="cb14-42"><a href="nasa-svm.html#cb14-42" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> sentence</span>
<span id="cb14-43"><a href="nasa-svm.html#cb14-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-44"><a href="nasa-svm.html#cb14-44" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> tf_idf(context, names <span class="op">=</span> <span class="va">None</span>):</span>
<span id="cb14-45"><a href="nasa-svm.html#cb14-45" aria-hidden="true" tabindex="-1"></a>    vectorizer <span class="op">=</span> TfidfVectorizer(stop_words<span class="op">=</span><span class="st">&apos;english&apos;</span>,</span>
<span id="cb14-46"><a href="nasa-svm.html#cb14-46" aria-hidden="true" tabindex="-1"></a>                                 token_pattern<span class="op">=</span><span class="vs">r&apos;(?u)\b[A-Za-z]+\b&apos;</span>)</span>
<span id="cb14-47"><a href="nasa-svm.html#cb14-47" aria-hidden="true" tabindex="-1"></a>    vector <span class="op">=</span> vectorizer.fit_transform(context)</span>
<span id="cb14-48"><a href="nasa-svm.html#cb14-48" aria-hidden="true" tabindex="-1"></a>    vocab <span class="op">=</span> vectorizer.vocabulary_</span>
<span id="cb14-49"><a href="nasa-svm.html#cb14-49" aria-hidden="true" tabindex="-1"></a>    tokens <span class="op">=</span> vectorizer.get_feature_names_out()</span>
<span id="cb14-50"><a href="nasa-svm.html#cb14-50" aria-hidden="true" tabindex="-1"></a>    df_tfidf <span class="op">=</span> pd.DataFrame(data<span class="op">=</span>vector.toarray(), index<span class="op">=</span>names, columns<span class="op">=</span>tokens)</span>
<span id="cb14-51"><a href="nasa-svm.html#cb14-51" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> df_tfidf, vocab</span>
<span id="cb14-52"><a href="nasa-svm.html#cb14-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-53"><a href="nasa-svm.html#cb14-53" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> bow(context, names <span class="op">=</span> <span class="va">None</span>, vocab <span class="op">=</span> <span class="va">None</span>):</span>
<span id="cb14-54"><a href="nasa-svm.html#cb14-54" aria-hidden="true" tabindex="-1"></a>    vectorizer <span class="op">=</span> CountVectorizer(stop_words<span class="op">=</span><span class="st">&apos;english&apos;</span>,</span>
<span id="cb14-55"><a href="nasa-svm.html#cb14-55" aria-hidden="true" tabindex="-1"></a>                                 token_pattern<span class="op">=</span><span class="vs">r&apos;(?u)\b[A-Za-z]+\b&apos;</span>,</span>
<span id="cb14-56"><a href="nasa-svm.html#cb14-56" aria-hidden="true" tabindex="-1"></a>                                 vocabulary<span class="op">=</span>vocab)</span>
<span id="cb14-57"><a href="nasa-svm.html#cb14-57" aria-hidden="true" tabindex="-1"></a>    vector <span class="op">=</span> vectorizer.fit_transform(context)</span>
<span id="cb14-58"><a href="nasa-svm.html#cb14-58" aria-hidden="true" tabindex="-1"></a>    tokens <span class="op">=</span> vectorizer.get_feature_names_out()</span>
<span id="cb14-59"><a href="nasa-svm.html#cb14-59" aria-hidden="true" tabindex="-1"></a>    df_bow <span class="op">=</span> pd.DataFrame(data<span class="op">=</span>vector.toarray(), index<span class="op">=</span>names, columns<span class="op">=</span>tokens)</span>
<span id="cb14-60"><a href="nasa-svm.html#cb14-60" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> df_bow</span>
<span id="cb14-61"><a href="nasa-svm.html#cb14-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-62"><a href="nasa-svm.html#cb14-62" aria-hidden="true" tabindex="-1"></a>tokenizer <span class="op">=</span> nltk.data.load(<span class="st">&apos;tokenizers/punkt/english.pickle&apos;</span>)</span>
<span id="cb14-63"><a href="nasa-svm.html#cb14-63" aria-hidden="true" tabindex="-1"></a>acronym_list <span class="op">=</span> [<span class="st">&apos;US&apos;</span>,<span class="st">&apos;SST&apos;</span>,<span class="st">&apos;IMF&apos;</span>,<span class="st">&apos;VMS&apos;</span>,<span class="st">&apos;RMS&apos;</span>,<span class="st">&apos;DOE&apos;</span>,<span class="st">&apos;NAS&apos;</span>,<span class="st">&apos;LET&apos;</span>,</span>
<span id="cb14-64"><a href="nasa-svm.html#cb14-64" aria-hidden="true" tabindex="-1"></a>                <span class="st">&apos;MLS&apos;</span>,<span class="st">&apos;RCS&apos;</span>,<span class="st">&apos;ISO&apos;</span>,<span class="st">&apos;CM&apos;</span>,<span class="st">&apos;PEM&apos;</span>,<span class="st">&apos;CRM&apos;</span>,<span class="st">&apos;LCC&apos;</span>,<span class="st">&apos;ATM&apos;</span>]</span>
<span id="cb14-65"><a href="nasa-svm.html#cb14-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-66"><a href="nasa-svm.html#cb14-66" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">&apos;nasa-svm_data/processed/processed_acronyms.jsonl&apos;</span>, <span class="st">&apos;r&apos;</span>) <span class="im">as</span> json_acronyms, <span class="bu">open</span>(<span class="st">&apos;nasa-svm_data/raw/results_merged.jsonl&apos;</span>, <span class="st">&apos;r&apos;</span>) <span class="im">as</span> json_corpus:</span>
<span id="cb14-67"><a href="nasa-svm.html#cb14-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-68"><a href="nasa-svm.html#cb14-68" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(sys.argv) <span class="op">&gt;</span> <span class="dv">1</span>:</span>
<span id="cb14-69"><a href="nasa-svm.html#cb14-69" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> sys.argv[<span class="dv">1</span>] <span class="kw">in</span> acronym_list:</span>
<span id="cb14-70"><a href="nasa-svm.html#cb14-70" aria-hidden="true" tabindex="-1"></a>            acronym <span class="op">=</span> sys.argv[<span class="dv">1</span>]</span>
<span id="cb14-71"><a href="nasa-svm.html#cb14-71" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb14-72"><a href="nasa-svm.html#cb14-72" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">&quot;Example Usage: python3 nasa_svm.py &lt;acronym&gt; [--v]&quot;</span>)</span>
<span id="cb14-73"><a href="nasa-svm.html#cb14-73" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="ss">f&apos;Acronyms: </span><span class="sc">{</span>acronym_list<span class="sc">}</span><span class="ss">&apos;</span>)</span>
<span id="cb14-74"><a href="nasa-svm.html#cb14-74" aria-hidden="true" tabindex="-1"></a>            exit()</span>
<span id="cb14-75"><a href="nasa-svm.html#cb14-75" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb14-76"><a href="nasa-svm.html#cb14-76" aria-hidden="true" tabindex="-1"></a>        acronym <span class="op">=</span> random.choice(acronym_list)</span>
<span id="cb14-77"><a href="nasa-svm.html#cb14-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-78"><a href="nasa-svm.html#cb14-78" aria-hidden="true" tabindex="-1"></a>    json_list <span class="op">=</span> <span class="bu">list</span>(json_acronyms)</span>
<span id="cb14-79"><a href="nasa-svm.html#cb14-79" aria-hidden="true" tabindex="-1"></a>    json_list_corpus <span class="op">=</span> <span class="bu">list</span>(json_corpus)</span>
<span id="cb14-80"><a href="nasa-svm.html#cb14-80" aria-hidden="true" tabindex="-1"></a>    ambiguous, sentences, combined, names, terms <span class="op">=</span> [], [], [], [], []</span>
<span id="cb14-81"><a href="nasa-svm.html#cb14-81" aria-hidden="true" tabindex="-1"></a>    slices, slices_amb, slices_cmb, slices_amb_ind <span class="op">=</span> [], [], [], []</span>
<span id="cb14-82"><a href="nasa-svm.html#cb14-82" aria-hidden="true" tabindex="-1"></a>    guess, guess_amb, guess_cmb, grades <span class="op">=</span> [], [], [], []</span>
<span id="cb14-83"><a href="nasa-svm.html#cb14-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-84"><a href="nasa-svm.html#cb14-84" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> json_str <span class="kw">in</span> json_list:</span>
<span id="cb14-85"><a href="nasa-svm.html#cb14-85" aria-hidden="true" tabindex="-1"></a>        result <span class="op">=</span> json.loads(json_str)</span>
<span id="cb14-86"><a href="nasa-svm.html#cb14-86" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> result[<span class="st">&apos;acronym&apos;</span>] <span class="op">==</span> acronym:</span>
<span id="cb14-87"><a href="nasa-svm.html#cb14-87" aria-hidden="true" tabindex="-1"></a>            keywords <span class="op">=</span> [result[<span class="st">&apos;definition&apos;</span>] <span class="op">+</span> <span class="st">&quot; (&quot;</span> <span class="op">+</span> result[<span class="st">&apos;acronym&apos;</span>] <span class="op">+</span> <span class="st">&quot;)&quot;</span>,</span>
<span id="cb14-88"><a href="nasa-svm.html#cb14-88" aria-hidden="true" tabindex="-1"></a>                        result[<span class="st">&apos;acronym&apos;</span>] <span class="op">+</span> <span class="st">&quot; (&quot;</span> <span class="op">+</span> result[<span class="st">&apos;definition&apos;</span>] <span class="op">+</span> <span class="st">&quot;)&quot;</span>,</span>
<span id="cb14-89"><a href="nasa-svm.html#cb14-89" aria-hidden="true" tabindex="-1"></a>                        result[<span class="st">&apos;acronym&apos;</span>], result[<span class="st">&apos;definition&apos;</span>]]</span>
<span id="cb14-90"><a href="nasa-svm.html#cb14-90" aria-hidden="true" tabindex="-1"></a>            names.append(result[<span class="st">&apos;definition&apos;</span>])</span>
<span id="cb14-91"><a href="nasa-svm.html#cb14-91" aria-hidden="true" tabindex="-1"></a>            <span class="co"># For all the abstracts where acronym variant is found</span></span>
<span id="cb14-92"><a href="nasa-svm.html#cb14-92" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span> index <span class="kw">in</span> result[<span class="st">&apos;corpus_positions&apos;</span>]:</span>
<span id="cb14-93"><a href="nasa-svm.html#cb14-93" aria-hidden="true" tabindex="-1"></a>                json_abstract <span class="op">=</span> json_list_corpus[index]</span>
<span id="cb14-94"><a href="nasa-svm.html#cb14-94" aria-hidden="true" tabindex="-1"></a>                <span class="co"># Take abstract, split each into sentences</span></span>
<span id="cb14-95"><a href="nasa-svm.html#cb14-95" aria-hidden="true" tabindex="-1"></a>                abstract <span class="op">=</span> json.loads(json_abstract)[<span class="st">&apos;description&apos;</span>]</span>
<span id="cb14-96"><a href="nasa-svm.html#cb14-96" aria-hidden="true" tabindex="-1"></a>                parsed <span class="op">=</span> tokenizer.tokenize(<span class="bu">str</span>(abstract))</span>
<span id="cb14-97"><a href="nasa-svm.html#cb14-97" aria-hidden="true" tabindex="-1"></a>                <span class="co"># Filter sentences and feed into split bucket</span></span>
<span id="cb14-98"><a href="nasa-svm.html#cb14-98" aria-hidden="true" tabindex="-1"></a>                <span class="cf">for</span> sentence <span class="kw">in</span> parsed:</span>
<span id="cb14-99"><a href="nasa-svm.html#cb14-99" aria-hidden="true" tabindex="-1"></a>                    <span class="co"># All of the sentences with keywords removed</span></span>
<span id="cb14-100"><a href="nasa-svm.html#cb14-100" aria-hidden="true" tabindex="-1"></a>                    combined.append(sentence)</span>
<span id="cb14-101"><a href="nasa-svm.html#cb14-101" aria-hidden="true" tabindex="-1"></a>                    combined[<span class="op">-</span><span class="dv">1</span>] <span class="op">=</span> filtered(combined[<span class="op">-</span><span class="dv">1</span>], keywords)</span>
<span id="cb14-102"><a href="nasa-svm.html#cb14-102" aria-hidden="true" tabindex="-1"></a>                    <span class="cf">if</span> sentence.find(keywords[<span class="dv">0</span>]) <span class="op">!=</span> <span class="op">-</span><span class="dv">1</span> <span class="kw">or</span> sentence.find(keywords[<span class="dv">1</span>]) <span class="op">!=</span> <span class="op">-</span><span class="dv">1</span>:</span>
<span id="cb14-103"><a href="nasa-svm.html#cb14-103" aria-hidden="true" tabindex="-1"></a>                        sentences.append(sentence)</span>
<span id="cb14-104"><a href="nasa-svm.html#cb14-104" aria-hidden="true" tabindex="-1"></a>                        <span class="co"># Remove acronyms and their definitions</span></span>
<span id="cb14-105"><a href="nasa-svm.html#cb14-105" aria-hidden="true" tabindex="-1"></a>                        sentences[<span class="op">-</span><span class="dv">1</span>] <span class="op">=</span> filtered(sentences[<span class="op">-</span><span class="dv">1</span>], keywords)</span>
<span id="cb14-106"><a href="nasa-svm.html#cb14-106" aria-hidden="true" tabindex="-1"></a>                        <span class="co"># Change &apos;if&apos; below back to elif to have every sentence containing</span></span>
<span id="cb14-107"><a href="nasa-svm.html#cb14-107" aria-hidden="true" tabindex="-1"></a>                        <span class="co"># both definition/acronym pair AND undefined acronyms</span></span>
<span id="cb14-108"><a href="nasa-svm.html#cb14-108" aria-hidden="true" tabindex="-1"></a>                        <span class="co"># considered as only part of [sentences] (NOT also ambiguous)</span></span>
<span id="cb14-109"><a href="nasa-svm.html#cb14-109" aria-hidden="true" tabindex="-1"></a>                        <span class="co"># also change sentences[-1] below back to sentence</span></span>
<span id="cb14-110"><a href="nasa-svm.html#cb14-110" aria-hidden="true" tabindex="-1"></a>                        <span class="cf">if</span> sentence.find(keywords[<span class="dv">2</span>]) <span class="op">!=</span> <span class="op">-</span><span class="dv">1</span>:</span>
<span id="cb14-111"><a href="nasa-svm.html#cb14-111" aria-hidden="true" tabindex="-1"></a>                            ambiguous.append(sentences[<span class="op">-</span><span class="dv">1</span>])</span>
<span id="cb14-112"><a href="nasa-svm.html#cb14-112" aria-hidden="true" tabindex="-1"></a>                            ambiguous[<span class="op">-</span><span class="dv">1</span>] <span class="op">=</span> filtered(ambiguous[<span class="op">-</span><span class="dv">1</span>], keywords)</span>
<span id="cb14-113"><a href="nasa-svm.html#cb14-113" aria-hidden="true" tabindex="-1"></a>                            <span class="co"># Ambiguous slices w.r.t. definitions</span></span>
<span id="cb14-114"><a href="nasa-svm.html#cb14-114" aria-hidden="true" tabindex="-1"></a>                            slices_amb_ind.append(index)</span>
<span id="cb14-115"><a href="nasa-svm.html#cb14-115" aria-hidden="true" tabindex="-1"></a>                    <span class="cf">elif</span> sentence.find(keywords[<span class="dv">2</span>]) <span class="op">!=</span> <span class="op">-</span><span class="dv">1</span>:</span>
<span id="cb14-116"><a href="nasa-svm.html#cb14-116" aria-hidden="true" tabindex="-1"></a>                        ambiguous.append(sentence)</span>
<span id="cb14-117"><a href="nasa-svm.html#cb14-117" aria-hidden="true" tabindex="-1"></a>                        ambiguous[<span class="op">-</span><span class="dv">1</span>] <span class="op">=</span> filtered(ambiguous[<span class="op">-</span><span class="dv">1</span>], keywords)</span>
<span id="cb14-118"><a href="nasa-svm.html#cb14-118" aria-hidden="true" tabindex="-1"></a>                        <span class="co"># Ambiguous slices w.r.t. definitions</span></span>
<span id="cb14-119"><a href="nasa-svm.html#cb14-119" aria-hidden="true" tabindex="-1"></a>                        slices_amb_ind.append(index)</span>
<span id="cb14-120"><a href="nasa-svm.html#cb14-120" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Slices based on which acronym sentence belongs to</span></span>
<span id="cb14-121"><a href="nasa-svm.html#cb14-121" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="bu">len</span>(slices_amb) <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb14-122"><a href="nasa-svm.html#cb14-122" aria-hidden="true" tabindex="-1"></a>                slices_amb.append(<span class="bu">len</span>(slices_amb_ind))</span>
<span id="cb14-123"><a href="nasa-svm.html#cb14-123" aria-hidden="true" tabindex="-1"></a>                slices.append(<span class="bu">len</span>(sentences))</span>
<span id="cb14-124"><a href="nasa-svm.html#cb14-124" aria-hidden="true" tabindex="-1"></a>                slices_cmb.append(<span class="bu">len</span>(combined))</span>
<span id="cb14-125"><a href="nasa-svm.html#cb14-125" aria-hidden="true" tabindex="-1"></a>            <span class="cf">elif</span> <span class="bu">len</span>(slices_amb) <span class="op">==</span> <span class="dv">1</span>:</span>
<span id="cb14-126"><a href="nasa-svm.html#cb14-126" aria-hidden="true" tabindex="-1"></a>                slices_amb.append(<span class="bu">len</span>(slices_amb_ind) <span class="op">-</span> slices_amb[<span class="dv">0</span>] <span class="op">+</span> <span class="dv">1</span>)</span>
<span id="cb14-127"><a href="nasa-svm.html#cb14-127" aria-hidden="true" tabindex="-1"></a>                slices.append(<span class="bu">len</span>(sentences) <span class="op">-</span> slices[<span class="dv">0</span>] <span class="op">+</span> <span class="dv">1</span>)</span>
<span id="cb14-128"><a href="nasa-svm.html#cb14-128" aria-hidden="true" tabindex="-1"></a>                slices_cmb.append(<span class="bu">len</span>(combined) <span class="op">-</span> slices_cmb[<span class="dv">0</span>] <span class="op">+</span> <span class="dv">1</span>)</span>
<span id="cb14-129"><a href="nasa-svm.html#cb14-129" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb14-130"><a href="nasa-svm.html#cb14-130" aria-hidden="true" tabindex="-1"></a>                <span class="co"># More than 2 defintiions</span></span>
<span id="cb14-131"><a href="nasa-svm.html#cb14-131" aria-hidden="true" tabindex="-1"></a>                slices_amb.append(<span class="bu">len</span>(slices_amb_ind) <span class="op">-</span> <span class="bu">reduce</span>(operator.add, slices_amb) <span class="op">+</span> <span class="dv">1</span>)</span>
<span id="cb14-132"><a href="nasa-svm.html#cb14-132" aria-hidden="true" tabindex="-1"></a>                slices.append(<span class="bu">len</span>(sentences) <span class="op">-</span> <span class="bu">reduce</span>(operator.add, slices) <span class="op">+</span> <span class="dv">1</span>)</span>
<span id="cb14-133"><a href="nasa-svm.html#cb14-133" aria-hidden="true" tabindex="-1"></a>                slices_cmb.append(<span class="bu">len</span>(combined) <span class="op">-</span> <span class="bu">reduce</span>(operator.add, slices_cmb) <span class="op">+</span> <span class="dv">1</span>)</span>
<span id="cb14-134"><a href="nasa-svm.html#cb14-134" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Optional additional contexutal terms for each definition</span></span>
<span id="cb14-135"><a href="nasa-svm.html#cb14-135" aria-hidden="true" tabindex="-1"></a>            <span class="co">#terms.append(&apos; &apos;.join(map(str, cleaner(json.loads(json_abstract)[&apos;subject.NASATerms&apos;]))))</span></span>
<span id="cb14-136"><a href="nasa-svm.html#cb14-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-137"><a href="nasa-svm.html#cb14-137" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Ensure at least 2 samples from each definition are extracted</span></span>
<span id="cb14-138"><a href="nasa-svm.html#cb14-138" aria-hidden="true" tabindex="-1"></a>    good_batch <span class="op">=</span> <span class="va">False</span></span>
<span id="cb14-139"><a href="nasa-svm.html#cb14-139" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="kw">not</span> good_batch:</span>
<span id="cb14-140"><a href="nasa-svm.html#cb14-140" aria-hidden="true" tabindex="-1"></a>        testing_set <span class="op">=</span> random.sample(ambiguous, <span class="bu">round</span>(<span class="bu">len</span>(ambiguous)<span class="op">/</span><span class="dv">5</span>))</span>
<span id="cb14-141"><a href="nasa-svm.html#cb14-141" aria-hidden="true" tabindex="-1"></a>        testing_ind, key <span class="op">=</span> [], []</span>
<span id="cb14-142"><a href="nasa-svm.html#cb14-142" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Determine which acronym the random sample belongs to</span></span>
<span id="cb14-143"><a href="nasa-svm.html#cb14-143" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> t <span class="kw">in</span> testing_set:</span>
<span id="cb14-144"><a href="nasa-svm.html#cb14-144" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="bu">any</span>(t <span class="kw">in</span> testing_set <span class="cf">for</span> t <span class="kw">in</span> ambiguous):</span>
<span id="cb14-145"><a href="nasa-svm.html#cb14-145" aria-hidden="true" tabindex="-1"></a>                testing_ind.append(ambiguous.index(t))</span>
<span id="cb14-146"><a href="nasa-svm.html#cb14-146" aria-hidden="true" tabindex="-1"></a>                <span class="cf">for</span> count, i <span class="kw">in</span> <span class="bu">enumerate</span>(slices_amb):</span>
<span id="cb14-147"><a href="nasa-svm.html#cb14-147" aria-hidden="true" tabindex="-1"></a>                    start <span class="op">=</span> <span class="bu">len</span>(ambiguous) <span class="op">-</span> <span class="bu">sum</span>(slices_amb[count:], <span class="op">-</span><span class="dv">1</span>)</span>
<span id="cb14-148"><a href="nasa-svm.html#cb14-148" aria-hidden="true" tabindex="-1"></a>                    <span class="cf">if</span> ambiguous.index(t) <span class="kw">in</span> <span class="bu">range</span>(start, i<span class="op">+</span>start):</span>
<span id="cb14-149"><a href="nasa-svm.html#cb14-149" aria-hidden="true" tabindex="-1"></a>                        key.append(names[count])</span>
<span id="cb14-150"><a href="nasa-svm.html#cb14-150" aria-hidden="true" tabindex="-1"></a>        key_counts <span class="op">=</span> {i:key.count(i) <span class="cf">for</span> i <span class="kw">in</span> names}</span>
<span id="cb14-151"><a href="nasa-svm.html#cb14-151" aria-hidden="true" tabindex="-1"></a>        good_count <span class="op">=</span> {k:v <span class="cf">for</span> (k,v) <span class="kw">in</span> key_counts.items() <span class="cf">if</span> v <span class="op">&gt;</span> <span class="dv">1</span>}</span>
<span id="cb14-152"><a href="nasa-svm.html#cb14-152" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="bu">len</span>(key_counts) <span class="op">==</span> <span class="bu">len</span>(good_count):</span>
<span id="cb14-153"><a href="nasa-svm.html#cb14-153" aria-hidden="true" tabindex="-1"></a>            good_batch <span class="op">=</span> <span class="va">True</span></span>
<span id="cb14-154"><a href="nasa-svm.html#cb14-154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-155"><a href="nasa-svm.html#cb14-155" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Update slices</span></span>
<span id="cb14-156"><a href="nasa-svm.html#cb14-156" aria-hidden="true" tabindex="-1"></a>    key_counts <span class="op">=</span> {i:key.count(i) <span class="cf">for</span> i <span class="kw">in</span> names}</span>
<span id="cb14-157"><a href="nasa-svm.html#cb14-157" aria-hidden="true" tabindex="-1"></a>    slices_amb <span class="op">=</span> [a_i <span class="op">-</span> b_i <span class="cf">for</span> a_i, b_i <span class="kw">in</span> <span class="bu">zip</span>(slices_amb, key_counts.values())]</span>
<span id="cb14-158"><a href="nasa-svm.html#cb14-158" aria-hidden="true" tabindex="-1"></a>    slices_cmb <span class="op">=</span> [a_i <span class="op">-</span> b_i <span class="cf">for</span> a_i, b_i <span class="kw">in</span> <span class="bu">zip</span>(slices_cmb, key_counts.values())]</span>
<span id="cb14-159"><a href="nasa-svm.html#cb14-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-160"><a href="nasa-svm.html#cb14-160" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Remove sample from training set</span></span>
<span id="cb14-161"><a href="nasa-svm.html#cb14-161" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> t <span class="kw">in</span> testing_set:</span>
<span id="cb14-162"><a href="nasa-svm.html#cb14-162" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="bu">any</span>(t <span class="kw">in</span> testing_set <span class="cf">for</span> t <span class="kw">in</span> ambiguous):</span>
<span id="cb14-163"><a href="nasa-svm.html#cb14-163" aria-hidden="true" tabindex="-1"></a>            ambiguous.remove(t)</span>
<span id="cb14-164"><a href="nasa-svm.html#cb14-164" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="bu">any</span>(t <span class="kw">in</span> testing_set <span class="cf">for</span> t <span class="kw">in</span> combined):</span>
<span id="cb14-165"><a href="nasa-svm.html#cb14-165" aria-hidden="true" tabindex="-1"></a>            combined.remove(t)</span>
<span id="cb14-166"><a href="nasa-svm.html#cb14-166" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-167"><a href="nasa-svm.html#cb14-167" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Build models</span></span>
<span id="cb14-168"><a href="nasa-svm.html#cb14-168" aria-hidden="true" tabindex="-1"></a>    context, vocab <span class="op">=</span> preprocess(sentences, slices, names)</span>
<span id="cb14-169"><a href="nasa-svm.html#cb14-169" aria-hidden="true" tabindex="-1"></a>    model <span class="op">=</span> SVC(C<span class="op">=</span><span class="fl">1.</span>, kernel<span class="op">=</span><span class="st">&apos;linear&apos;</span>, decision_function_shape<span class="op">=</span><span class="st">&apos;ovo&apos;</span>)</span>
<span id="cb14-170"><a href="nasa-svm.html#cb14-170" aria-hidden="true" tabindex="-1"></a>    model.fit(context, names)</span>
<span id="cb14-171"><a href="nasa-svm.html#cb14-171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-172"><a href="nasa-svm.html#cb14-172" aria-hidden="true" tabindex="-1"></a>    context_amb, vocab_amb <span class="op">=</span> preprocess(ambiguous, slices_amb, names)</span>
<span id="cb14-173"><a href="nasa-svm.html#cb14-173" aria-hidden="true" tabindex="-1"></a>    model_amb <span class="op">=</span> SVC(C<span class="op">=</span><span class="fl">1.</span>, kernel<span class="op">=</span><span class="st">&apos;linear&apos;</span>, decision_function_shape<span class="op">=</span><span class="st">&apos;ovo&apos;</span>)</span>
<span id="cb14-174"><a href="nasa-svm.html#cb14-174" aria-hidden="true" tabindex="-1"></a>    model_amb.fit(context_amb, names)</span>
<span id="cb14-175"><a href="nasa-svm.html#cb14-175" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-176"><a href="nasa-svm.html#cb14-176" aria-hidden="true" tabindex="-1"></a>    context_cmb, vocab_cmb <span class="op">=</span> preprocess(combined, slices_cmb, names)</span>
<span id="cb14-177"><a href="nasa-svm.html#cb14-177" aria-hidden="true" tabindex="-1"></a>    model_cmb <span class="op">=</span> SVC(C<span class="op">=</span><span class="fl">1.</span>, kernel<span class="op">=</span><span class="st">&apos;linear&apos;</span>, decision_function_shape<span class="op">=</span><span class="st">&apos;ovo&apos;</span>)</span>
<span id="cb14-178"><a href="nasa-svm.html#cb14-178" aria-hidden="true" tabindex="-1"></a>    model_cmb.fit(context_cmb, names)</span>
<span id="cb14-179"><a href="nasa-svm.html#cb14-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-180"><a href="nasa-svm.html#cb14-180" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Prepare tests for prediction</span></span>
<span id="cb14-181"><a href="nasa-svm.html#cb14-181" aria-hidden="true" tabindex="-1"></a>    testing_set <span class="op">=</span> cleaner(testing_set)</span>
<span id="cb14-182"><a href="nasa-svm.html#cb14-182" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Bag of words for all test sentences</span></span>
<span id="cb14-183"><a href="nasa-svm.html#cb14-183" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> bow(testing_set, vocab<span class="op">=</span>vocab)</span>
<span id="cb14-184"><a href="nasa-svm.html#cb14-184" aria-hidden="true" tabindex="-1"></a>    df_ambig <span class="op">=</span> bow(testing_set, vocab<span class="op">=</span>vocab_amb)</span>
<span id="cb14-185"><a href="nasa-svm.html#cb14-185" aria-hidden="true" tabindex="-1"></a>    df_comb <span class="op">=</span> bow(testing_set, vocab<span class="op">=</span>vocab_cmb)</span>
<span id="cb14-186"><a href="nasa-svm.html#cb14-186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-187"><a href="nasa-svm.html#cb14-187" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(testing_set)):</span>
<span id="cb14-188"><a href="nasa-svm.html#cb14-188" aria-hidden="true" tabindex="-1"></a>        guess.append(model.predict(df.loc[i].to_frame().T))</span>
<span id="cb14-189"><a href="nasa-svm.html#cb14-189" aria-hidden="true" tabindex="-1"></a>        guess_amb.append(model_amb.predict(df_ambig.loc[i].to_frame().T))</span>
<span id="cb14-190"><a href="nasa-svm.html#cb14-190" aria-hidden="true" tabindex="-1"></a>        guess_cmb.append(model_cmb.predict(df_comb.loc[i].to_frame().T))</span>
<span id="cb14-191"><a href="nasa-svm.html#cb14-191" aria-hidden="true" tabindex="-1"></a>    results <span class="op">=</span> pd.DataFrame([guess_amb, guess, guess_cmb,key],</span>
<span id="cb14-192"><a href="nasa-svm.html#cb14-192" aria-hidden="true" tabindex="-1"></a>                           index<span class="op">=</span>[<span class="st">&apos;Guess (ambiguous)&apos;</span>, <span class="st">&apos;Guess (unambiguous)&apos;</span>,</span>
<span id="cb14-193"><a href="nasa-svm.html#cb14-193" aria-hidden="true" tabindex="-1"></a>                                  <span class="st">&apos;Guess (combined)&apos;</span>, <span class="st">&apos;Correct Answer&apos;</span>])</span>
<span id="cb14-194"><a href="nasa-svm.html#cb14-194" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> results.index[:<span class="dv">3</span>]:</span>
<span id="cb14-195"><a href="nasa-svm.html#cb14-195" aria-hidden="true" tabindex="-1"></a>        grades.append(np.where(results.loc[<span class="st">&apos;Correct Answer&apos;</span>] <span class="op">==</span> results.loc[i], <span class="va">True</span>, <span class="va">False</span>))</span>
<span id="cb14-196"><a href="nasa-svm.html#cb14-196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-197"><a href="nasa-svm.html#cb14-197" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(sys.argv) <span class="op">&gt;</span> <span class="dv">2</span>:</span>
<span id="cb14-198"><a href="nasa-svm.html#cb14-198" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> sys.argv[<span class="dv">2</span>] <span class="op">==</span> <span class="st">&apos;--v&apos;</span>:</span>
<span id="cb14-199"><a href="nasa-svm.html#cb14-199" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">&quot;-------------------------&quot;</span>)</span>
<span id="cb14-200"><a href="nasa-svm.html#cb14-200" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="ss">f&apos;Test set: (n = </span><span class="sc">{</span><span class="bu">len</span>(testing_set)<span class="sc">}</span><span class="ss">)&apos;</span>)</span>
<span id="cb14-201"><a href="nasa-svm.html#cb14-201" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span> key, value <span class="kw">in</span> key_counts.items():</span>
<span id="cb14-202"><a href="nasa-svm.html#cb14-202" aria-hidden="true" tabindex="-1"></a>                <span class="bu">print</span>(<span class="ss">f&apos;</span><span class="sc">{</span>key<span class="sc">}</span><span class="ss">: </span><span class="sc">{</span>value<span class="sc">}</span><span class="ss">&apos;</span>)</span>
<span id="cb14-203"><a href="nasa-svm.html#cb14-203" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="ss">f&apos;</span><span class="ch">\n</span><span class="ss">Ambiguous n: </span><span class="sc">{</span><span class="bu">len</span>(ambiguous)<span class="sc">}</span><span class="ss"> </span><span class="ch">\t</span><span class="ss"> slices: </span><span class="sc">{</span>slices_amb<span class="sc">}</span><span class="ss">&apos;</span>)</span>
<span id="cb14-204"><a href="nasa-svm.html#cb14-204" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="ss">f&apos;Unambiguous n: </span><span class="sc">{</span><span class="bu">len</span>(sentences)<span class="sc">}</span><span class="ss"> </span><span class="ch">\t</span><span class="ss"> slices: </span><span class="sc">{</span>slices<span class="sc">}</span><span class="ss">&apos;</span>)</span>
<span id="cb14-205"><a href="nasa-svm.html#cb14-205" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="ss">f&apos;Combined n: </span><span class="sc">{</span><span class="bu">len</span>(combined)<span class="sc">}</span><span class="ss"> </span><span class="ch">\t</span><span class="ss"> slices: </span><span class="sc">{</span>slices_cmb<span class="sc">}</span><span class="ss">&apos;</span>)</span>
<span id="cb14-206"><a href="nasa-svm.html#cb14-206" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="bu">len</span>(names) <span class="op">&gt;</span> <span class="dv">2</span>:</span>
<span id="cb14-207"><a href="nasa-svm.html#cb14-207" aria-hidden="true" tabindex="-1"></a>                <span class="cf">for</span> i <span class="kw">in</span> results.index[:<span class="dv">3</span>]:</span>
<span id="cb14-208"><a href="nasa-svm.html#cb14-208" aria-hidden="true" tabindex="-1"></a>                    <span class="bu">print</span>(<span class="ss">f&apos;</span><span class="ch">\n</span><span class="sc">{</span>i<span class="sc">}</span><span class="ss"> MCM &amp; F1:&apos;</span>)</span>
<span id="cb14-209"><a href="nasa-svm.html#cb14-209" aria-hidden="true" tabindex="-1"></a>                    <span class="bu">print</span>(multilabel_confusion_matrix(<span class="bu">list</span>(results.loc[<span class="st">&apos;Correct Answer&apos;</span>]),</span>
<span id="cb14-210"><a href="nasa-svm.html#cb14-210" aria-hidden="true" tabindex="-1"></a>                                                      <span class="bu">list</span>(results.loc[i]), labels<span class="op">=</span>names))</span>
<span id="cb14-211"><a href="nasa-svm.html#cb14-211" aria-hidden="true" tabindex="-1"></a>                    f <span class="op">=</span> <span class="bu">dict</span>(<span class="bu">zip</span>(names, f1_score(<span class="bu">list</span>(results.loc[<span class="st">&apos;Correct Answer&apos;</span>]),</span>
<span id="cb14-212"><a href="nasa-svm.html#cb14-212" aria-hidden="true" tabindex="-1"></a>                                                 <span class="bu">list</span>(results.loc[i]), average<span class="op">=</span><span class="va">None</span>, labels<span class="op">=</span>names)))</span>
<span id="cb14-213"><a href="nasa-svm.html#cb14-213" aria-hidden="true" tabindex="-1"></a>                    <span class="cf">for</span> key, value <span class="kw">in</span> f.items():</span>
<span id="cb14-214"><a href="nasa-svm.html#cb14-214" aria-hidden="true" tabindex="-1"></a>                        <span class="bu">print</span>(<span class="ss">f&apos;</span><span class="sc">{</span>key<span class="sc">}</span><span class="ss">: </span><span class="sc">{</span>value<span class="sc">}</span><span class="ss">&apos;</span>)</span>
<span id="cb14-215"><a href="nasa-svm.html#cb14-215" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb14-216"><a href="nasa-svm.html#cb14-216" aria-hidden="true" tabindex="-1"></a>                <span class="cf">for</span> i <span class="kw">in</span> results.index[:<span class="dv">3</span>]:</span>
<span id="cb14-217"><a href="nasa-svm.html#cb14-217" aria-hidden="true" tabindex="-1"></a>                    <span class="bu">print</span>(<span class="ss">f&apos;</span><span class="ch">\n</span><span class="sc">{</span>i<span class="sc">}</span><span class="ss"> CM &amp; F1:&apos;</span>)</span>
<span id="cb14-218"><a href="nasa-svm.html#cb14-218" aria-hidden="true" tabindex="-1"></a>                    <span class="bu">print</span>(confusion_matrix(<span class="bu">list</span>(results.loc[<span class="st">&apos;Correct Answer&apos;</span>]), <span class="bu">list</span>(results.loc[i])))</span>
<span id="cb14-219"><a href="nasa-svm.html#cb14-219" aria-hidden="true" tabindex="-1"></a>                    f <span class="op">=</span> <span class="bu">dict</span>(<span class="bu">zip</span>(names, f1_score(<span class="bu">list</span>(results.loc[<span class="st">&apos;Correct Answer&apos;</span>]),</span>
<span id="cb14-220"><a href="nasa-svm.html#cb14-220" aria-hidden="true" tabindex="-1"></a>                                                 <span class="bu">list</span>(results.loc[i]), average<span class="op">=</span><span class="va">None</span>, labels<span class="op">=</span>names)))</span>
<span id="cb14-221"><a href="nasa-svm.html#cb14-221" aria-hidden="true" tabindex="-1"></a>                    <span class="cf">for</span> key, value <span class="kw">in</span> f.items():</span>
<span id="cb14-222"><a href="nasa-svm.html#cb14-222" aria-hidden="true" tabindex="-1"></a>                        <span class="bu">print</span>(<span class="ss">f&apos;</span><span class="sc">{</span>key<span class="sc">}</span><span class="ss">: </span><span class="sc">{</span>value<span class="sc">}</span><span class="ss">&apos;</span>)</span>
<span id="cb14-223"><a href="nasa-svm.html#cb14-223" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="ss">f&apos;</span><span class="ch">\n</span><span class="ss">Accuracy (ambiguous): </span><span class="sc">{</span><span class="bu">sum</span>(grades[<span class="dv">0</span>])<span class="op">/</span><span class="bu">len</span>(testing_set)<span class="sc">}</span><span class="ss">&apos;</span>)</span>
<span id="cb14-224"><a href="nasa-svm.html#cb14-224" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="ss">f&apos;Accuracy (unambiguous): </span><span class="sc">{</span><span class="bu">sum</span>(grades[<span class="dv">1</span>])<span class="op">/</span><span class="bu">len</span>(testing_set)<span class="sc">}</span><span class="ss">&apos;</span>)</span>
<span id="cb14-225"><a href="nasa-svm.html#cb14-225" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="ss">f&apos;Accuracy (combined): </span><span class="sc">{</span><span class="bu">sum</span>(grades[<span class="dv">2</span>])<span class="op">/</span><span class="bu">len</span>(testing_set)<span class="sc">}</span><span class="ss">&apos;</span>)</span>
<span id="cb14-226"><a href="nasa-svm.html#cb14-226" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb14-227"><a href="nasa-svm.html#cb14-227" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(acronym, <span class="bu">sum</span>(grades[<span class="dv">0</span>])<span class="op">/</span><span class="bu">len</span>(testing_set), <span class="bu">sum</span>(grades[<span class="dv">1</span>])<span class="op">/</span><span class="bu">len</span>(testing_set), <span class="bu">sum</span>(grades[<span class="dv">2</span>])<span class="op">/</span><span class="bu">len</span>(testing_set))</span></code></pre></div>

</div>
</div>
<h3>References<a href="references.html#references" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-Turtel2007AcronymD" class="csl-entry">
Turtel, Benjamin D., and Dennis Shasha. 2007. <span>&#x201C;Acronym Disambiguation.&#x201D;</span> In. <a href="https://cs.nyu.edu/media/publications/TR2015-973.pdf">https://cs.nyu.edu/media/publications/TR2015-973.pdf</a>.
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="google-capstone.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
